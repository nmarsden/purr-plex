(this["webpackJsonppurr-plex"]=this["webpackJsonppurr-plex"]||[]).push([[0],[,,,,function(e,t,n){e.exports={grid:"Grid_grid__3byWf",row:"Grid_row__3iB0a",cell:"Grid_cell__Gw65o",shadedCell:"Grid_shadedCell__2xhfR"}},,,function(e,t,n){e.exports={container:"DraggablePiece_container__2WQE4",isPreDragging:"DraggablePiece_isPreDragging__2WEyo"}},,function(e,t,n){e.exports={container:"Piece_container__HKwIh",piece:"Piece_piece__21Hob",isCompleted:"Piece_isCompleted__29xdv","fade-out":"Piece_fade-out__1E-gz"}},function(e,t,n){e.exports={block:"Block_block__3k5af",type1a:"Block_type1a__CE7pB",type1b:"Block_type1b__1osI_",type1c:"Block_type1c__19qYn",type1d:"Block_type1d__2h7mH",type2a:"Block_type2a__mNICL",type2b:"Block_type2b__OWzjg",type2c:"Block_type2c__36yJ6",type2d:"Block_type2d__229xO",type2e:"Block_type2e__2_wbq",type2f:"Block_type2f__1h2dF",type3a:"Block_type3a__UjqB1",type3b:"Block_type3b__X-il1",type3c:"Block_type3c__2ONk0",type3d:"Block_type3d__3oMRT",type4a:"Block_type4a__2ba0F",isPreDragging:"Block_isPreDragging__3ZTOG",isDragging:"Block_isDragging__3k0tt",isMuted:"Block_isMuted__xzwBa"}},,function(e,t,n){e.exports={container:"Score_container__1Fd1Q"}},,function(e,t,n){e.exports=n(25)},,,,,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),f=n(6),a=n.n(f),c=(n(19),n(2)),i=n(1),y=Object(o.createContext)(null);function s(){var e=window.document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}var p=function(e){var t=e.children,n=function(){var e=Object(o.useState)(s()),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){function e(){r(s())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),f=n.width,a=n.height,c=f-2*(f/18),p=a-(a/18+a/3),u=Math.floor(c/9),l=Math.floor(p/9),x=Math.min(u,l),d=9*x,g=Math.floor(.4*(a-d)),_=Math.floor(.6*(a-d)),h=g,O=Math.floor((f-d)/2),b={cellSize:x,gridSize:d,gridLeft:O,gridTop:h,headerHeight:g,footerHeight:_,draggableLeft:Math.floor(O+d/2),draggableTop:Math.floor(h+d+2.2*x)};return r.a.createElement(y.Provider,{value:b},t)},u=function(){return Object(o.useContext)(y)},l=n(4),x=n.n(l),d=n(3),g=n.n(d),_=n(9),h=n.n(_),O=n(5),b=n(10),m=n.n(b),v=g.a.bind(m.a),B=function(e){var t,n=e.x,o=e.y,f=e.size,a=e.blockType,c=e.isPreDragging,i=e.isDragging,y=e.isMuted,s={width:"".concat(f+1,"px"),height:"".concat(f+1,"px"),left:"".concat(n-1,"px"),top:"".concat(o-1,"px")},p=v((t={block:!0},Object(O.a)(t,"type".concat(a),!0),Object(O.a)(t,"isPreDragging",c),Object(O.a)(t,"isDragging",i),Object(O.a)(t,"isMuted",y),t));return r.a.createElement("div",{style:s,className:p})},X=new Map([["1B",[{offset:{x:0,y:0},type:"4a"}]],["2B_I_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"3a"}]],["2B_I_2",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"3b"}]],["3B_I_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"3a"}]],["3B_I_2",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"3b"}]],["3B_L_1",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"2b"}]],["3B_L_2",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"3b"}]],["3B_L_3",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"3b"},{offset:{x:1,y:0},type:"3a"}]],["3B_L_4",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:1},type:"3a"}]],["4B_O",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"2b"}]],["4B_L_1",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:1},type:"2e"},{offset:{x:2,y:0},type:"3d"},{offset:{x:2,y:1},type:"2b"}]],["4B_L_2",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"2f"},{offset:{x:1,y:2},type:"3b"}]],["4B_L_3",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"3b"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"3a"}]],["4B_L_4",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"2c"},{offset:{x:1,y:2},type:"3a"}]],["4B_J_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"2a"},{offset:{x:2,y:1},type:"3b"}]],["4B_J_2",[{offset:{x:0,y:2},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"2f"},{offset:{x:1,y:2},type:"2b"}]],["4B_J_3",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:1},type:"2e"},{offset:{x:2,y:1},type:"3a"}]],["4B_J_4",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"3b"},{offset:{x:1,y:0},type:"3a"}]],["4B_Z_1",[{offset:{x:0,y:1},type:"2d"},{offset:{x:0,y:2},type:"3b"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"2b"}]],["4B_Z_2",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"2c"},{offset:{x:2,y:1},type:"3a"}]],["4B_S_1",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:1},type:"2a"},{offset:{x:1,y:2},type:"3b"}]],["4B_S_2",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"2d"},{offset:{x:1,y:1},type:"2b"},{offset:{x:2,y:0},type:"3a"}]],["4B_T_1",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"1c"},{offset:{x:2,y:1},type:"3a"}]],["4B_T_2",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"1b"},{offset:{x:1,y:2},type:"3b"}]],["4B_T_3",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"1a"},{offset:{x:1,y:1},type:"3b"},{offset:{x:2,y:0},type:"3a"}]],["4B_T_4",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"1d"},{offset:{x:0,y:2},type:"3b"},{offset:{x:1,y:1},type:"3a"}]],["4B_I_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"2e"},{offset:{x:3,y:0},type:"3a"}]],["4B_I_2",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"2f"},{offset:{x:0,y:3},type:"3b"}]]]),k=function(e,t,n){return(X.get(n)||[]).map((function(n){return{x:e+n.offset.x,y:t+n.offset.y}}))},E=function(e){for(var t=[],n=0;n<9;n++){var o=[];t.push(o);for(var r=0;r<9;r++)o.push(e)}return t},j=function(e){var t=E(!1);return e.forEach((function(e){k(e.gridX,e.gridY,e.shape).forEach((function(e){t[e.x][e.y]=!0}))})),t},S=g.a.bind(h.a),M=function(e){var t=e.x,n=e.y,o=e.shape,f=e.isDraggable,a=e.isPreDragging,c=e.isDragging,i=e.isMuted,y=e.isCompleted,s=u().cellSize,p=function(e,t,n,o,f,a,c){return(X.get(o)||[]).map((function(o,i){return r.a.createElement(B,{key:i,x:e+o.offset.x*n,y:t+o.offset.y*n,size:n,blockType:a?"4a":o.type,isPreDragging:f,isDragging:a,isMuted:c})}))}(s*t,s*n,f&&!c?Math.floor(s/2):s,o,a,c,i),l=D(o,s),x={width:"".concat(l.width,"px"),height:"".concat(l.height,"px")},d=S({container:!0,isCompleted:y}),g=S({piece:!0});return r.a.createElement("div",{style:x,className:d},r.a.createElement("div",{style:x,className:g},p))},w=function(){return Array.from(X.keys())[Math.floor(Math.random()*X.size)]},D=function(e,t){for(var n=(X.get(e)||[]).map((function(e){return e.offset})),o=n[0].x,r=n[0].y,f=n[0].x,a=n[0].y,c=1,i=n.length;c<i;c++){var y=n[c].x,s=n[c].y;o=y<o?y:o,r=s<r?s:r,f=y>f?y:f,a=s>a?s:a}return{width:(f-o+1)*t,height:(a-r+1)*t}},P=function(e,t){for(var n=j(t),o=E(!1),r=0;r<9;r++)for(var f=function(t){var f=!0;k(r,t,e).forEach((function(e){f=f&&e.x<9&&e.y<9&&!n[e.x][e.y]})),o[r][t]=f},a=0;a<9;a++)f(a);return o},z=function(e,t){var n=[],o=[0,1,2,3,4,5,6,7,8],r=j([].concat(Object(c.a)(t),[e])),f=[],a=[],i=[],y=0,s=k(e.gridX,e.gridY,e.shape);s.forEach((function(e){if(!f.includes(e.x)&&r[e.x].every((function(e){return e}))){var t=o.map((function(t){return{x:e.x,y:t}}));n.push.apply(n,Object(c.a)(t)),y++,f.push(e.x)}if(!a.includes(e.y)&&o.every((function(t){return r[t][e.y]}))){var s=o.map((function(t){return{x:t,y:e.y}}));n.push.apply(n,Object(c.a)(s)),y++,a.push(e.y)}var p=function(e){for(var t=[],n=3*Math.floor(e.x/3),o=3*Math.floor(e.y/3),r=0;r<3;r++)for(var f=0;f<3;f++)t.push({x:n+r,y:o+f});return t}(e),u=function(e){var t=Math.floor((e.y+1)/3);return 3*Math.floor((e.x+1)/3)+t}(p[0]);!i.includes(u)&&p.every((function(e){var t=e.x,n=e.y;return r[t][n]}))&&(n.push.apply(n,Object(c.a)(p)),y++,i.push(u))}));var p=s.filter((function(e){return!n.some((function(t){return t.x===e.x&&t.y===e.y}))})).length;return{completedGridPositions:n,completedRegionCount:y,placedBlocksKeptCount:p}},C=function(e,t){var n=e[t];return e.some((function(e){return e.x===n.x&&e.y===n.y+1||e.x===n.x&&e.y===n.y-1||e.y===n.y&&e.x===n.x+1||e.y===n.y&&e.x===n.x-1}))},L=function(e,t){return e.length===t.length&&e.every((function(e,n){return e.x===t[n].x&&e.y===t[n].y}))},Y=function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:0},N=function(e){for(var t=function(e){return function(e){return e.map((function(e){return{x:e.x,y:e.y}}))}(e).sort(Y)}(e),n=0,o=Array.from(X.keys());n<o.length;n++){var r=o[n],f=(X.get(r)||[]).map((function(e){return e.offset}));if(L(t,f))return r}return"UNKNOWN"},T=function(e,t){var n,o,r=[];return function(e){for(var t=[],n=[],o=0;o<e.length;o++)C(e,o)?n.push(e[o]):t.push([e[o]]);return n.length>0&&t.push(n),t}(function(e,t){return e.filter((function(e){return!t.some((function(t){return t.x===e.x&&t.y===e.y}))}))}((X.get(e.shape)||[]).map((function(e){return e.offset})),(n=e.gridX,o=e.gridY,t.map((function(e){return{x:e.x-n,y:e.y-o}}))))).forEach((function(t){var n=function(e,t,n){var o=Math.min.apply(Math,Object(c.a)(n.map((function(e){return e.x})))),r=Math.min.apply(Math,Object(c.a)(n.map((function(e){return e.y}))));return{gridX:e+o,gridY:t+r,shape:N(n.map((function(e){return{x:e.x-o,y:e.y-r}})))}}(e.gridX,e.gridY,t);r.push(n)})),r},I=function(e){var t=e.placedPieces,n=e.hoverPiece,o=e.completedBlocks,f=u(),a=f.cellSize,c={left:"".concat(f.gridLeft,"px"),top:"".concat(f.gridTop,"px")},i={width:"".concat(a,"px"),height:"".concat(a,"px")},y=["OOOXXXOOO","OOOXXXOOO","OOOXXXOOO","XXXOOOXXX","XXXOOOXXX","XXXOOOXXX","OOOXXXOOO","OOOXXXOOO","OOOXXXOOO"].map((function(e,t){var n=[];return e.split("").forEach((function(e,t){n.push(r.a.createElement("div",{key:t,style:i,className:"O"===e?x.a.cell:x.a.shadedCell}))})),r.a.createElement("div",{key:t,className:x.a.row},n)}));return r.a.createElement("div",{style:c,className:x.a.grid},y,t.map((function(e,t){return r.a.createElement(M,{key:t,x:e.gridX,y:e.gridY,shape:e.shape})})),n&&r.a.createElement(M,{key:999,x:n.gridX,y:n.gridY,shape:n.shape,isMuted:!0}),o.map((function(e,t){return r.a.createElement(M,{key:100+t,x:e.gridX,y:e.gridY,shape:e.shape,isCompleted:!0})})))},G=n(7),H=n.n(G),J=n(11),W=n.n(J),R=g.a.bind(H.a),K=function(e){var t=e.shape,n=e.onDrag,f=e.onDragStop,a=u(),c=D(t,a.cellSize),y=D(t,a.cellSize/2),s={x:(c.width-y.width)/2,y:(c.height-y.height)/2},p=Object(o.useState)(!0),l=Object(i.a)(p,2),x=l[0],d=l[1],g=Object(o.useState)(!1),_=Object(i.a)(g,2),h=_[0],O=_[1],b=Object(o.useState)(s),m=Object(i.a)(b,2),v=m[0],B=m[1],X=-2*a.cellSize,k={left:"".concat(a.draggableLeft-c.width/2,"px"),top:"".concat(a.draggableTop-c.height/2,"px")},E=R({isPreDragging:x}),j=function(e){var n=e.node.getBoundingClientRect(),o=a.cellSize/2,r=Math.floor((n.left+o-a.gridLeft)/a.cellSize),f=Math.floor((n.top+o-a.gridTop)/a.cellSize);return{isInsideGrid:r>=0&&r<=8&&f>=0&&f<=8,gridX:r,gridY:f,shape:t}};return r.a.createElement("div",{style:k,className:H.a.container},r.a.createElement(W.a,{position:v,onStart:function(){d(!0),B({x:0,y:X}),O(!0)},onDrag:function(e,t){d(!1),n(j(t))},onStop:function(e,t){var n=j(t);B(s),O(!1),f(n)}},r.a.createElement("div",{className:E},r.a.createElement(M,{x:0,y:0,shape:t,isDraggable:!0,isPreDragging:x,isDragging:h}))))},q=n(12),F=n.n(q),Z=n(13),A=n.n(Z),Q=function(e){var t=e.previousScore,n=e.currentScore,o=u(),f=o.headerHeight,a=o.cellSize,c={height:"".concat(f,"px")},i={height:"".concat(2*a,"px"),fontSize:"".concat(a,"px")};return r.a.createElement("div",{className:F.a.container,style:c},r.a.createElement("div",{style:i},r.a.createElement(A.a,{start:t,end:n,duration:1})))},U=w(),V=[],$=P(U,[]);var ee=function(){var e=Object(o.useState)(V),t=Object(i.a)(e,2),n=t[0],f=t[1],a=Object(o.useState)(),y=Object(i.a)(a,2),s=y[0],u=y[1],l=Object(o.useState)([]),x=Object(i.a)(l,2),d=x[0],g=x[1],_=Object(o.useState)(U),h=Object(i.a)(_,2),O=h[0],b=h[1],m=Object(o.useState)(0),v=Object(i.a)(m,2),B=v[0],X=v[1],E=Object(o.useState)(0),j=Object(i.a)(E,2),S=j[0],M=j[1],D=function(e,t,n){return e&&$[t][n]},C=function(e,t,n){var o=n.completedGridPositions,r=[].concat(Object(c.a)(t),[e]);return o.length>0&&(r=function(e,t,n){var o=[];return[].concat(Object(c.a)(t),[e]).forEach((function(e){var t=k(e.gridX,e.gridY,e.shape),r=t.filter((function(e){return n.some((function(t){return t.x===e.x&&t.y===e.y}))}));if(0===r.length)o.push(e);else if(r.length!==t.length){var f=T(e,r);o.push.apply(o,Object(c.a)(f))}})),o}(e,t,o)),f(r),r};return r.a.createElement(p,null,r.a.createElement("div",null,r.a.createElement(Q,{previousScore:B,currentScore:S}),r.a.createElement(I,{placedPieces:n,hoverPiece:s,completedBlocks:d}),r.a.createElement(K,{shape:O,onDrag:function(e){var t=e.isInsideGrid,n=e.gridX,o=e.gridY,r=e.shape;D(t,n,o)?u({gridX:n,gridY:o,shape:r}):u(null)},onDragStop:function(e){var t=e.isInsideGrid,o=e.gridX,r=e.gridY,f=e.shape;if(D(t,o,r)){var a={gridX:o,gridY:r,shape:f},c=z(a,n),i=C(a,n,c);!function(e){var t=e.completedGridPositions;t.length>0&&(g(t.map((function(e){return{gridX:e.x,gridY:e.y,shape:"1B"}}))),window.setTimeout((function(){g([])}),500))}(c),function(e){var t=e.placedBlocksKeptCount,n=e.completedRegionCount;X(S);var o=function(e,t){var n=e;return n+=9*t*(t<=2?2:4)}(t,n);M(S+o)}(c),function(e){var t=w();b(t),$=P(t,e)}(i)}u(null)}})))};a.a.render(r.a.createElement(ee,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.116829ad.chunk.js.map