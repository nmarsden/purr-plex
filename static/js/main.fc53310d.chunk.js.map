{"version":3,"sources":["components/themeModal/ThemeModal.module.scss","components/grid/Grid.module.scss","components/highScore/HighScore.module.scss","components/draggablePiece/DraggablePiece.module.scss","components/pointsMessage/PointsMessage.module.scss","components/newGameButton/NewGameButton.module.scss","components/piece/Piece.module.scss","components/block/Block.module.scss","components/score/Score.module.scss","components/themeButton/ThemeButton.module.scss","hooks/useWindowDimensions/UseWindowDimensions.ts","components/gameDimensionsProvider/GameDimensionsProvider.tsx","components/block/cat.svg","components/themeProvider/ThemeProvider.tsx","components/block/Block.tsx","components/piece/Piece.tsx","components/grid/Grid.tsx","components/draggablePiece/DraggablePiece.tsx","components/score/Score.tsx","components/pointsMessage/PointsMessage.tsx","components/newGameButton/NewGameButton.tsx","components/highScore/cup.svg","components/highScore/HighScore.tsx","components/themeButton/palette.svg","components/themeButton/ThemeButton.tsx","components/themeModal/ThemeModal.tsx","App.tsx","hooks/useLocalStorage/UseLocalStorage.ts","index.tsx"],"names":["module","exports","getWindowDimensions","window","document","documentElement","width","clientWidth","height","clientHeight","GameDimensionsCtx","createContext","GameDimensionsProvider","children","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","gridWidth","gridHeight","cellWidth","Math","floor","cellHeight","cellSize","min","gridSize","headerHeight","footerHeight","gridTop","gridLeft","gameDimensions","windowWidth","windowHeight","draggableLeft","draggableTop","newGameButtonLeft","newGameButtonTop","Provider","value","useGameDimensions","useContext","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","stroke","strokeWidth","d","_ref3","_ref","svgRef","title","props","enableBackground","viewBox","xmlSpace","ref","color","colorRendering","fillRule","imageRendering","shapeRendering","style","blockProgression","isolation","mixBlendMode","textDecorationColor","textDecorationLine","textDecorationStyle","textIndent","textTransform","whiteSpace","ForwardRef","forwardRef","ThemeContext","ThemeProvider","theme","setTheme","setValue","useTheme","cx","classNames","bind","styles","Block","x","y","size","blockType","isPreDragging","isDragging","isMuted","isCompletable","inlineStyles","left","top","className","block","padding","SHAPES","Map","offset","type","shapeToGridPositions","gridX","gridY","shape","get","map","b","initMultiDim","multiDim","arr","push","calculateOccupied","placedPieces","occupied","forEach","pp","gridPos","Piece","isDraggable","isCompleted","blocks","shapeToBlocks","shapeDims","shapeDimensions","containerClassName","container","pieceClassName","piece","pickRandomShape","Array","from","random","blockSize","blockOffsets","minX","minY","maxX","maxY","len","calculatePlaceable","gridFlags","isAnyPos","isPlaceable","calcCompleted","newPlacedPiece","completedGridPositions","indices","completedColumnIndex","completedRowIndex","completed3x3Index","completedRegionCount","placedPieceGridPositions","includes","every","o","completedColumn","completedRow","gridPositions3x3","gridPositions","leftGridPos3x3","topGridPos3x3","xOffset","yOffset","getGridPositions3x3","index3x3","topLeftGridPos","row3x3","getIndex3x3","placedBlocksKeptCount","filter","some","c","completedRegionCenter","xPositions","p","yPositions","max","calcCompletedRegionCenter","hasNeighbours","index","isEqual","blockOffsets1","blockOffsets2","compareXThenY","o1","o2","findShape","sortedBlockOffsets","copyBlockOffsets","sort","sortBlockOffsets","calcSmallerPieces","placedPiece","smallerPieces","result","blockOffsetsWithNeighbours","groupBlockOffsetsByNeighbours","pieceBlockOffsets","completedBlockOffsets","blockOffset","removeCompletedBlockOffsets","pos","newPiece","createPiece","Grid","hoverPiece","completableBlocks","completedBlocks","gridInlineStyles","cellInlineStyles","rows","cellType","rowIndex","cells","split","ch","colIndex","cell","shadedCell","row","grid","DraggablePiece","onDrag","onDragStop","isDisabled","smallShapeDims","initialPosition","setIsPreDragging","setIsDragging","position","setPosition","dragStartYOffset","containerInlineStyles","pieceContainerClassName","toGridDragData","data","pieceRect","node","getBoundingClientRect","halfCellSize","isInsideGrid","onStart","e","onStop","gridDragData","disabled","Score","previousScore","currentScore","valueInlineStyles","fontSize","start","end","duration","PointsMessage","pointsMessageData","containerSize","containerTop","containerLeft","pointsHeight","pointsInlineStyles","lineHeight","isShown","points","isCombo","NewGameButton","onClick","containerHeight","containerWidth","buttonHeight","buttonWidth","borderRadius","buttonInlineStyles","button","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","id","HighScore","highScore","containerRight","right","cupSize","cupInlineStyles","cup","ThemeButton","palette","ThemeModal","isOpen","onClose","containerPadding","shadowBlur","shadowSpread","boxShadow","arrowSize","arrowInlineStyles","borderWidth","marginLeft","headerInlineStyles","isSelected","margin","chooseTheme","chosenTheme","event","modalBackdrop","arrow","header","body","buttonPlain","buttonCat","initialShape","initialPlacedPieces","placeable","App","setPlacedPieces","setHoverPiece","setCompletedBlocks","setCompletableBlocks","nextShape","setNextShape","setPreviousScore","score","setScore","setPointsMessageData","isGameOver","setIsGameOver","initialValue","item","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","useLocalStorage","setHighScore","isThemeModalOpen","setIsThemeModalOpen","updateNextShape","updatePlacedPieces","newPlacedPieces","completed","removeCompleted","toBlocks","updateScore","calcPoints","newScore","setTimeout","showPointsMessage","placeablePiece","completable","updateCompletedBlocks","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.fc53310d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalBackdrop\":\"ThemeModal_modalBackdrop__3rj6a\",\"container\":\"ThemeModal_container__FYBe3\",\"arrow\":\"ThemeModal_arrow__3HJ9y\",\"header\":\"ThemeModal_header__2vzVs\",\"body\":\"ThemeModal_body__fniEe\",\"buttonPlain\":\"ThemeModal_buttonPlain__3QCkq\",\"buttonCat\":\"ThemeModal_buttonCat__kemmk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"Grid_grid__3byWf\",\"row\":\"Grid_row__3iB0a\",\"cell\":\"Grid_cell__Gw65o\",\"shadedCell\":\"Grid_shadedCell__2xhfR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HighScore_container__lUGrY\",\"highScore\":\"HighScore_highScore__22IAG\",\"cup\":\"HighScore_cup__1RhXs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DraggablePiece_container__2WQE4\",\"isPreDragging\":\"DraggablePiece_isPreDragging__2WEyo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PointsMessage_container__kfyA8\",\"points\":\"PointsMessage_points__1CcWh\",\"flash\":\"PointsMessage_flash__3RSoB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"NewGameButton_container__5XyCv\",\"button\":\"NewGameButton_button__vLJP1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Piece_container__HKwIh\",\"piece\":\"Piece_piece__21Hob\",\"isCompleted\":\"Piece_isCompleted__29xdv\",\"fade-out\":\"Piece_fade-out__1E-gz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Block_block__3k5af\",\"type1a\":\"Block_type1a__CE7pB\",\"type1b\":\"Block_type1b__1osI_\",\"type1c\":\"Block_type1c__19qYn\",\"type1d\":\"Block_type1d__2h7mH\",\"type2a\":\"Block_type2a__mNICL\",\"type2b\":\"Block_type2b__OWzjg\",\"type2c\":\"Block_type2c__36yJ6\",\"type2d\":\"Block_type2d__229xO\",\"type2e\":\"Block_type2e__2_wbq\",\"type2f\":\"Block_type2f__1h2dF\",\"type3a\":\"Block_type3a__UjqB1\",\"type3b\":\"Block_type3b__X-il1\",\"type3c\":\"Block_type3c__2ONk0\",\"type3d\":\"Block_type3d__3oMRT\",\"type4a\":\"Block_type4a__2ba0F\",\"isPreDragging\":\"Block_isPreDragging__3ZTOG\",\"isDragging\":\"Block_isDragging__3k0tt\",\"isMuted\":\"Block_isMuted__xzwBa\",\"isCompletable\":\"Block_isCompletable__14YK9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Score_container__1Fd1Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"palette\":\"ThemeButton_palette__N1Wqe\"};","import { useEffect, useState } from 'react';\n\nfunction getWindowDimensions() {\n  const { clientWidth: width, clientHeight: height } = window.document.documentElement;\n  return {\n    width,\n    height\n  };\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n","import React, { createContext, FunctionComponent, useContext } from 'react'\nimport useWindowDimensions from '../../hooks/useWindowDimensions/UseWindowDimensions';\n\nconst GameDimensionsCtx = createContext<any>(null);\n\nconst GameDimensionsProvider: FunctionComponent<any> = ({ children }) => {\n  const { width, height } = useWindowDimensions();\n\n  const gridSideMargin = width / 18;\n  const gridTopMargin = height / 9;\n  const gridBottomMargin = height / 2.5;\n\n  const gridWidth =  width - (gridSideMargin * 2);\n  const gridHeight =  height - (gridTopMargin + gridBottomMargin);\n\n  const cellWidth = Math.floor( gridWidth / 9 );\n  const cellHeight = Math.floor( gridHeight / 9 );\n\n  const cellSize = Math.min( cellWidth, cellHeight );\n  const gridSize = cellSize * 9;\n  const headerHeight = Math.floor( (height - gridSize) * 0.3 );\n  const footerHeight = Math.floor( (height - gridSize) * 0.7 );\n\n  const gridTop = headerHeight;\n  const gridLeft = Math.floor( ( width - gridSize ) / 2 );\n\n  const draggableLeft = Math.floor( gridLeft + (gridSize / 2) );\n  const draggableTop = Math.floor( gridTop + gridSize + (cellSize * 2.2) );\n\n  const newGameButtonLeft =  gridLeft;\n  const newGameButtonTop =  Math.floor( gridTop + gridSize + (cellSize * 3.6) );\n\n  const gameDimensions = {\n    windowWidth: width,\n    windowHeight: height,\n    cellSize,\n    gridSize,\n    gridLeft,\n    gridTop,\n    headerHeight,\n    footerHeight,\n    draggableLeft,\n    draggableTop,\n    newGameButtonLeft,\n    newGameButtonTop\n  };\n\n  return (\n    <GameDimensionsCtx.Provider value={gameDimensions}>\n      { children }\n    </GameDimensionsCtx.Provider>\n  )\n};\n\nexport default GameDimensionsProvider;\nexport const useGameDimensions = () => useContext(GameDimensionsCtx);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  stroke: \"#000\",\n  strokeWidth: 10\n}, React.createElement(\"g\", {\n  stroke: \"#000\",\n  strokeWidth: 10\n}, React.createElement(\"path\", {\n  d: \"m492.14 15.556c-12.058-5.034-25.859-2.352-35.15 6.834l-65.088 64.349c-41.042-24.673-87.679-37.633-135.9-37.633s-94.855 12.961-135.9 37.633l-65.084-64.348c-9.29-9.185-23.1-11.867-35.158-6.834-12.056 5.033-19.864 16.728-19.864 29.792v235.97c0 119.98 97.649 217.63 217.63 217.63h76.735c119.98 0 217.63-97.649 217.63-217.63v-235.97c0-13.064-7.808-24.759-19.863-29.793zm3.012 265.76c0 97.458-103.32 200.78-200.78 200.78h-76.735c-97.458 0-210.34-103.79-200.78-200.78 0 0-1.0111-178.17 0-243.73 0.12337-7.9996 16.617-2.8104 24 0.2715 26.889 11.224 62.169 61.448 62.169 61.448 6.986 6.907 18.141 7.862 26.22 2.275 19.822-13.706 40.974-23.8 64.123-30.352v24.53c0 11.28-2.855 20.426 8.426 20.426s8.426-9.145 8.426-20.426v-28.435c7.4895-0.732 26.638-5.098 45.787-5.098 19.149 0 38.298 4.366 45.787 5.098v28.436c0 11.28-2.855 20.426 8.426 20.426s8.426-9.145 8.426-20.426v-24.53c23.149 6.553 44.292 16.647 64.114 30.354 8.079 5.587 19.125 4.633 26.112-2.275 0 0 34.921-51.357 62.284-61.45 7.5251-2.7758 24.042-6.2926 24 1.728-0.33435 64.355 0 241.73 0 241.73z\",\n  strokeWidth: 0\n})));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m346.79 341.59c-11.024-2.403-7.904 4.586-10.306 15.608-2.929 13.445-29.063 23.203-42.85 23.203-8.558 0-24.694-1.723-30.322-8.214-0.445-0.513-0.918-28.994-1.407-29.456l35.357-27.113c9.821-9.821 2.865-26.369-11.024-26.369h-60.484c-13.889 0-20.845 16.549-11.024 26.369l33.237 27.116c-0.532 0.496-1.04 26.959-1.522 27.514-5.627 6.491-19.763 10.184-28.322 10.184-13.787 0-41.92-9.774-44.85-23.218-2.402-11.023 2.715-18.017-8.306-15.616-11.022 2.402-18.01-12.719-15.608-1.698 6.99 32.076 35.909 55.355 68.765 55.355 13.516 0 26.582-3.885 37.756-10.994 11.174 7.109 24.24 10.993 37.756 10.993 32.855 0 61.775-23.281 68.765-55.357 2.399-11.023-4.589 4.095-15.611 1.693z\"\n});\n\nvar SvgCat = function SvgCat(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    enableBackground: \"new 0 0 512 512\",\n    viewBox: \"0 0 512 512\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, React.createElement(\"path\", {\n    d: \"m128 227.5c-6.3109-8.0177 36-21 36-21l36 18s-3.8427 11.294-4 11c-5.1039-9.5368-22.191-18.411-33-18-9.7284 0.37007-28.979 17.65-35 10z\",\n    color: \"#000000\",\n    colorRendering: \"auto\",\n    fillRule: \"evenodd\",\n    imageRendering: \"auto\",\n    shapeRendering: \"auto\",\n    stroke: \"#000\",\n    strokeWidth: 5,\n    style: {\n      blockProgression: \"tb\",\n      isolation: \"auto\",\n      mixBlendMode: \"normal\",\n      textDecorationColor: \"#000000\",\n      textDecorationLine: \"none\",\n      textDecorationStyle: \"solid\",\n      textIndent: 0,\n      textTransform: \"none\",\n      whiteSpace: \"normal\"\n    }\n  }), React.createElement(\"path\", {\n    d: \"m384.01 225.5c6.3109-8.0177-36-21-36-21l-36 18s3.8427 11.294 4 11c5.1039-9.5368 22.191-18.411 33-18 9.7284 0.37007 28.979 17.65 35 10z\",\n    color: \"#000000\",\n    colorRendering: \"auto\",\n    fillRule: \"evenodd\",\n    imageRendering: \"auto\",\n    shapeRendering: \"auto\",\n    stroke: \"#000\",\n    strokeWidth: 5,\n    style: {\n      blockProgression: \"tb\",\n      isolation: \"auto\",\n      mixBlendMode: \"normal\",\n      textDecorationColor: \"#000000\",\n      textDecorationLine: \"none\",\n      textDecorationStyle: \"solid\",\n      textIndent: 0,\n      textTransform: \"none\",\n      whiteSpace: \"normal\"\n    }\n  }));\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCat, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/cat.0663126c.svg\";\nexport { ForwardRef as ReactComponent };","import React, { createContext, FunctionComponent, useContext, useState } from 'react'\n\nconst ThemeContext = createContext<any>(null);\n\nconst ThemeProvider: FunctionComponent<any> = ({ children }) => {\n  const [theme, setTheme] = useState<Theme>('plain');\n\n  return (\n    <ThemeContext.Provider value={{value: theme, setValue: setTheme}}>\n      { children }\n    </ThemeContext.Provider>\n  )\n};\n\nexport type Theme = 'plain' | 'cat';\n\nexport default ThemeProvider;\nexport const useTheme = () => useContext(ThemeContext);\n","import React, { FunctionComponent } from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './Block.module.scss';\nimport { ReactComponent as CatSvg } from './cat.svg';\nimport { useTheme } from '../themeProvider/ThemeProvider';\n\nlet cx = classNames.bind(styles);\n\nconst Block: FunctionComponent<any> = ({ x, y, size, blockType, isPreDragging, isDragging, isMuted, isCompletable }) => {\n  let theme = useTheme();\n  const inlineStyles = {\n    width: `${size + 1}px`,\n    height: `${size + 1}px`,\n    left: `${x - 1}px`,\n    top: `${y - 1}px`,\n  };\n\n  let className = cx({\n    block: true,\n    [`type${blockType}`]: true,\n    isPreDragging: isPreDragging,\n    isDragging: isDragging,\n    isMuted: isMuted,\n    isCompletable: isCompletable\n  });\n\n  const catInlineStyles = {\n    width: `100%`,\n    height: `100%`,\n    padding: `10%`\n  };\n\n  return (\n    <div style={inlineStyles} className={className}>\n      {theme.value === 'cat' ? <CatSvg style={catInlineStyles}></CatSvg> : <></>}\n    </div>\n  );\n};\n\nexport default Block;\n","import React, { FunctionComponent } from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './Piece.module.scss';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\nimport Block from '../block/Block';\n\ntype BlockType = '1a' | '1b' | '1c'| '1d' | '2a' | '2b' | '2c'| '2d'| '2e' | '2f' | '3a' | '3b' | '3c' | '3d' | '4a';\n\ninterface BlockOffset {\n  x: number,\n  y: number\n}\n\ninterface BlockData {\n  offset:BlockOffset,\n  type:BlockType\n}\n\n// SHAPES: each shape has an associated array of BlockOffset which is ordered by x ascending and then y ascending\nconst SHAPES:Map<string, Array<BlockData>> = new Map([\n  ['1B',      [{offset:{x:0,y:0},type:'4a'}]],\n  ['2B_I_1',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'3a'}]],\n  ['2B_I_2',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'3b'}]],\n  ['3B_I_1',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'2e'}, {offset:{x:2,y:0},type:'3a'}]],\n  ['3B_I_2',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'2f'}, {offset:{x:0,y:2},type:'3b'}]],\n  ['3B_L_1',  [{offset:{x:0,y:1},type:'3c'}, {offset:{x:1,y:0},type:'3d'}, {offset:{x:1,y:1},type:'2b'}]],\n  ['3B_L_2',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'2a'}, {offset:{x:1,y:1},type:'3b'}]],\n  ['3B_L_3',  [{offset:{x:0,y:0},type:'2d'}, {offset:{x:0,y:1},type:'3b'}, {offset:{x:1,y:0},type:'3a'}]],\n  ['3B_L_4',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'2c'}, {offset:{x:1,y:1},type:'3a'}]],\n  ['4B_O',    [{offset:{x:0,y:0},type:'2d'}, {offset:{x:0,y:1},type:'2c'}, {offset:{x:1,y:0},type:'2a'}, {offset:{x:1,y:1},type:'2b'}]],\n  ['4B_L_1',  [{offset:{x:0,y:1},type:'3c'}, {offset:{x:1,y:1},type:'2e'}, {offset:{x:2,y:0},type:'3d'}, {offset:{x:2,y:1},type:'2b'}]],\n  ['4B_L_2',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'2a'}, {offset:{x:1,y:1},type:'2f'}, {offset:{x:1,y:2},type:'3b'}]],\n  ['4B_L_3',  [{offset:{x:0,y:0},type:'2d'}, {offset:{x:0,y:1},type:'3b'}, {offset:{x:1,y:0},type:'2e'}, {offset:{x:2,y:0},type:'3a'}]],\n  ['4B_L_4',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'2f'}, {offset:{x:0,y:2},type:'2c'}, {offset:{x:1,y:2},type:'3a'}]],\n  ['4B_J_1',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'2e'}, {offset:{x:2,y:0},type:'2a'}, {offset:{x:2,y:1},type:'3b'}]],\n  ['4B_J_2',  [{offset:{x:0,y:2},type:'3c'}, {offset:{x:1,y:0},type:'3d'}, {offset:{x:1,y:1},type:'2f'}, {offset:{x:1,y:2},type:'2b'}]],\n  ['4B_J_3',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'2c'}, {offset:{x:1,y:1},type:'2e'}, {offset:{x:2,y:1},type:'3a'}]],\n  ['4B_J_4',  [{offset:{x:0,y:0},type:'2d'}, {offset:{x:0,y:1},type:'2f'}, {offset:{x:0,y:2},type:'3b'}, {offset:{x:1,y:0},type:'3a'}]],\n  ['4B_Z_1',  [{offset:{x:0,y:1},type:'2d'}, {offset:{x:0,y:2},type:'3b'}, {offset:{x:1,y:0},type:'3d'}, {offset:{x:1,y:1},type:'2b'}]],\n  ['4B_Z_2',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'2a'}, {offset:{x:1,y:1},type:'2c'}, {offset:{x:2,y:1},type:'3a'}]],\n  ['4B_S_1',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'2c'}, {offset:{x:1,y:1},type:'2a'}, {offset:{x:1,y:2},type:'3b'}]],\n  ['4B_S_2',  [{offset:{x:0,y:1},type:'3c'}, {offset:{x:1,y:0},type:'2d'}, {offset:{x:1,y:1},type:'2b'}, {offset:{x:2,y:0},type:'3a'}]],\n  ['4B_T_1',  [{offset:{x:0,y:1},type:'3c'}, {offset:{x:1,y:0},type:'3d'}, {offset:{x:1,y:1},type:'1c'}, {offset:{x:2,y:1},type:'3a'}]],\n  ['4B_T_2',  [{offset:{x:0,y:1},type:'3c'}, {offset:{x:1,y:0},type:'3d'}, {offset:{x:1,y:1},type:'1b'}, {offset:{x:1,y:2},type:'3b'}]],\n  ['4B_T_3',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'1a'}, {offset:{x:1,y:1},type:'3b'}, {offset:{x:2,y:0},type:'3a'}]],\n  ['4B_T_4',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'1d'}, {offset:{x:0,y:2},type:'3b'}, {offset:{x:1,y:1},type:'3a'}]],\n  ['4B_I_1',  [{offset:{x:0,y:0},type:'3c'}, {offset:{x:1,y:0},type:'2e'}, {offset:{x:2,y:0},type:'2e'}, {offset:{x:3,y:0},type:'3a'}]],\n  ['4B_I_2',  [{offset:{x:0,y:0},type:'3d'}, {offset:{x:0,y:1},type:'2f'}, {offset:{x:0,y:2},type:'2f'}, {offset:{x:0,y:3},type:'3b'}]],\n]);\n\nconst shapeToBlocks = (x:number, y:number, size:number, shape:string, isPreDragging:boolean, isDragging:boolean, isMuted:boolean, isCompletable:boolean) => {\n  const blockData:BlockData[] = SHAPES.get(shape) || [];\n  return blockData.map( (b, i) =>\n    <Block key={i}\n           x={x+(b.offset.x * size)}\n           y={y+(b.offset.y * size)}\n           size={size}\n           blockType={isDragging ? '4a' : b.type}\n           isPreDragging={isPreDragging}\n           isDragging={isDragging}\n           isMuted={isMuted}\n           isCompletable={isCompletable}\n    />);\n};\n\nexport const shapeToGridPositions = (gridX:number, gridY:number, shape:string):Array<GridPos> => {\n  const blockData:BlockData[] = SHAPES.get(shape) || [];\n  return blockData.map(b => { return { x: gridX + b.offset.x, y: gridY + b.offset.y } });\n};\n\nconst getGridPositions3x3 = (gridPos:GridPos):GridPos[] => {\n  const gridPositions:GridPos[] = [];\n  const leftGridPos3x3 = Math.floor(gridPos.x / 3) * 3;\n  const topGridPos3x3 = Math.floor(gridPos.y / 3) * 3;\n  for (let xOffset=0; xOffset<3; xOffset++) {\n    for (let yOffset=0; yOffset<3; yOffset++) {\n      gridPositions.push({ x:leftGridPos3x3 + xOffset, y: topGridPos3x3 + yOffset });\n    }\n  }\n  return gridPositions;\n};\n\nconst initMultiDim = (value:boolean):boolean[][] => {\n  let multiDim = [];\n  for (let gridX=0; gridX<9; gridX++) {\n    let arr:boolean[] = [];\n    multiDim.push(arr);\n    for (let gridY=0; gridY<9; gridY++) {\n      arr.push(value);\n    }\n  }\n  return multiDim;\n};\n\nconst calculateOccupied = (placedPieces:PieceData[]):boolean[][] => {\n  let occupied = initMultiDim(false);\n  placedPieces.forEach(pp => {\n    shapeToGridPositions(pp.gridX, pp.gridY, pp.shape).forEach(gridPos => {\n      occupied[gridPos.x][gridPos.y] = true;\n    })\n  });\n  return occupied;\n};\n\nlet cx = classNames.bind(styles);\n\nconst Piece: FunctionComponent<any> = ({ x, y, shape, isDraggable, isPreDragging, isDragging, isMuted, isCompletable, isCompleted }) => {\n  const gameDimensions = useGameDimensions();\n  const cellSize = gameDimensions.cellSize;\n  const blockSize = (isDraggable && !isDragging) ? Math.floor(cellSize/2) : cellSize;\n  const blocks = shapeToBlocks(cellSize * x, cellSize * y, blockSize, shape, isPreDragging, isDragging, isMuted, isCompletable);\n\n  const shapeDims = shapeDimensions(shape, cellSize);\n  let inlineStyles = {\n    width: `${shapeDims.width}px`,\n    height: `${shapeDims.height}px`\n  };\n  let containerClassName = cx({\n    container: true,\n    isCompleted: isCompleted\n  });\n  let pieceClassName = cx({\n    piece: true,\n  });\n\n  return (\n    <div style={inlineStyles} className={containerClassName}>\n      <div style={inlineStyles} className={pieceClassName}>\n        {blocks}\n      </div>\n    </div>\n);\n};\n\nexport default Piece;\n\nexport interface GridPos {\n  x: number,\n  y: number\n}\n\nexport interface PieceData {\n  gridX: number,\n  gridY: number,\n  shape: string\n}\n\nexport const pickRandomShape = ():string => { return Array.from(SHAPES.keys())[Math.floor(Math.random() * SHAPES.size)] };\n\n// FOR TESTING (replace above code with this)\n// export const pickRandomShape = ():string => { return '3B_I_1' };\n\nexport const shapeDimensions = (shape:string, blockSize:number) => {\n  const blockData:BlockData[] = SHAPES.get(shape) || [];\n  const blockOffsets:BlockOffset[] = blockData.map(b => b.offset);\n\n  let minX = blockOffsets[0].x;\n  let minY = blockOffsets[0].y;\n  let maxX = blockOffsets[0].x;\n  let maxY = blockOffsets[0].y;\n\n  for (let i = 1, len=blockOffsets.length; i < len; i++) {\n    let x = blockOffsets[i].x;\n    let y = blockOffsets[i].y;\n    minX = (x < minX) ? x : minX;\n    minY = (y < minY) ? y : minY;\n    maxX = (x > maxX) ? x : maxX;\n    maxY = (y > maxY) ? y : maxY;\n  }\n  const width = (maxX - minX + 1) * blockSize;\n  const height = (maxY - minY + 1) * blockSize;\n  return { width, height };\n};\n\nexport interface Placeable {\n  gridFlags:boolean[][],\n  isAnyPos:boolean\n}\n\nexport const calculatePlaceable = (shape:string, placedPieces:PieceData[]):Placeable => {\n  const occupied:boolean[][] = calculateOccupied(placedPieces);\n  let gridFlags:boolean[][] = initMultiDim(false);\n  let isAnyPos = false;\n\n  for (let gridX=0; gridX<9; gridX++) {\n    for (let gridY=0; gridY<9; gridY++) {\n\n      let isPlaceable = true;\n      shapeToGridPositions(gridX, gridY, shape).forEach(gridPos => {\n        isPlaceable = isPlaceable && gridPos.x < 9 && gridPos.y < 9 && !occupied[gridPos.x][gridPos.y];\n      });\n      gridFlags[gridX][gridY] = isPlaceable;\n      if (isPlaceable) {\n        isAnyPos = true;\n      }\n    }\n  }\n  return { gridFlags, isAnyPos };\n};\n\nexport interface CalcCompletedResult {\n  completedGridPositions:GridPos[],\n  completedRegionCount:number,\n  completedRegionCenter:GridPos,\n  placedBlocksKeptCount:number\n}\n\nexport const calcCompleted = (newPlacedPiece:PieceData, placedPieces: PieceData[]): CalcCompletedResult => {\n\n  const completedGridPositions:GridPos[] = [];\n  const indices:number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8];\n  const occupied:boolean[][] = calculateOccupied([...placedPieces, newPlacedPiece]);\n  const completedColumnIndex:number[] = [];\n  const completedRowIndex:number[] = [];\n  const completed3x3Index:number[] = [];\n  let completedRegionCount = 0;\n  const placedPieceGridPositions:GridPos[] = shapeToGridPositions(newPlacedPiece.gridX, newPlacedPiece.gridY, newPlacedPiece.shape);\n\n  const calcCompletedRegionCenter = (completedGridPositions:GridPos[]):GridPos => {\n    const xPositions = completedGridPositions.map(p => p.x);\n    const yPositions = completedGridPositions.map(p => p.y);\n    const minX = Math.min(...xPositions);\n    const maxX = Math.max(...xPositions);\n    const minY = Math.min(...yPositions);\n    const maxY = Math.max(...yPositions);\n\n    return { x: Math.floor(minX + (maxX - minX)/2), y: Math.floor(minY + (maxY - minY)/2) };\n  };\n\n  const getIndex3x3 = (topLeftGridPos:GridPos):number => {\n    const row3x3 = Math.floor((topLeftGridPos.y + 1) / 3);\n    const col3x3 = Math.floor((topLeftGridPos.x + 1) / 3);\n    return (3 * col3x3) + row3x3;\n  };\n\n  placedPieceGridPositions.forEach(gridPos => {\n    // Check for completed column\n    if (!completedColumnIndex.includes(gridPos.x) && occupied[gridPos.x].every(o => o)) {\n      const completedColumn:GridPos[] = indices.map(i => { return { x:gridPos.x, y:i }; });\n      completedGridPositions.push(...completedColumn);\n      completedRegionCount++;\n      completedColumnIndex.push(gridPos.x);\n    }\n    // Check for completed row\n    if (!completedRowIndex.includes(gridPos.y) && indices.every(i => occupied[i][gridPos.y])) {\n      const completedRow:GridPos[] = indices.map(i => { return { x:i, y:gridPos.y }; });\n      completedGridPositions.push(...completedRow);\n      completedRegionCount++;\n      completedRowIndex.push(gridPos.y);\n    }\n    // Check for completed 3x3\n    const gridPositions3x3 = getGridPositions3x3(gridPos);\n    const index3x3 = getIndex3x3(gridPositions3x3[0]);\n    if (!completed3x3Index.includes(index3x3) && gridPositions3x3.every(({x, y}) => occupied[x][y])) {\n      completedGridPositions.push(...gridPositions3x3);\n      completedRegionCount++;\n      completed3x3Index.push(index3x3);\n    }\n  });\n\n  // Calc placedBlocksKeptCount\n  const placedBlocksKept:GridPos[] = placedPieceGridPositions.filter(gridPos => !completedGridPositions.some(c => c.x === gridPos.x && c.y === gridPos.y));\n  const placedBlocksKeptCount = placedBlocksKept.length;\n\n  // Calc completedRegionCenter\n  const completedRegionCenter = calcCompletedRegionCenter(completedGridPositions);\n\n  return {\n    completedGridPositions,\n    completedRegionCount,\n    completedRegionCenter,\n    placedBlocksKeptCount\n  };\n};\n\nconst toBlockOffsets = (gridX: number, gridY: number, gridPositions: BlockOffset[]) => {\n  return gridPositions.map(pos => { return { x: (pos.x - gridX), y: (pos.y - gridY) } });\n};\n\nconst hasNeighbours = (blockOffsets:BlockOffset[], index:number):boolean => {\n  const target = blockOffsets[index];\n  return blockOffsets.some((offset) => (offset.x === target.x && offset.y === target.y+1) ||\n                                       (offset.x === target.x && offset.y === target.y-1) ||\n                                       (offset.y === target.y && offset.x === target.x+1) ||\n                                       (offset.y === target.y && offset.x === target.x-1));\n};\n\nconst removeCompletedBlockOffsets = (pieceBlockOffsets: BlockOffset[], completedBlockOffsets:BlockOffset[]):BlockOffset[] => {\n  return pieceBlockOffsets.filter(blockOffset => !completedBlockOffsets.some(c => c.x === blockOffset.x && c.y === blockOffset.y));\n};\n\nconst groupBlockOffsetsByNeighbours = (blockOffsets:BlockOffset[]):BlockOffset[][] => {\n  const result:BlockOffset[][] = [];\n  // Any blockOffset without neighbours is its own group\n  // Note: This strategy takes advantage of knowing that we are dealing with at most 3 block offsets, so there will be\n  // at most only be one group of blocks with neighbours, and any other groups will be single blocks without neighbours.\n  const blockOffsetsWithNeighbours:BlockOffset[] = [];\n  for (let i=0; i<blockOffsets.length; i++) {\n    if (hasNeighbours(blockOffsets, i)) {\n      blockOffsetsWithNeighbours.push(blockOffsets[i]);\n    } else {\n      result.push([blockOffsets[i]])\n    }\n  }\n  if (blockOffsetsWithNeighbours.length > 0) {\n    result.push(blockOffsetsWithNeighbours);\n  }\n  return result;\n};\n\nconst isEqual = (blockOffsets1: BlockOffset[], blockOffsets2: BlockOffset[]): boolean => {\n  return (blockOffsets1.length === blockOffsets2.length) &&\n         blockOffsets1.every((o, i) => (o.x === blockOffsets2[i].x) && (o.y === blockOffsets2[i].y));\n};\n\nconst copyBlockOffsets = (blockOffsets:BlockOffset[]):BlockOffset[] => {\n  return blockOffsets.map(o => { return { x:o.x, y:o.y } });\n};\n\nconst compareXThenY = (o1:BlockOffset, o2:BlockOffset):number => {\n  if (o1.x < o2.x) {\n    return -1;\n  }\n  if (o1.x > o2.x) {\n    return 1;\n  }\n  // o1.x equals o2.x\n  if (o1.y < o2.y) {\n    return -1;\n  }\n  return 0;\n};\n\nconst sortBlockOffsets = (blockOffsets:BlockOffset[]):BlockOffset[] => {\n  return copyBlockOffsets(blockOffsets).sort(compareXThenY);\n};\n\nconst findShape = (blockOffsets: BlockOffset[]):string => {\n  const sortedBlockOffsets:BlockOffset[] = sortBlockOffsets(blockOffsets);\n\n  for(let shape of Array.from( SHAPES.keys()) ) {\n    const blockData:BlockData[] = SHAPES.get(shape) || [];\n    const blockOffsets:BlockOffset[] = blockData.map(b => b.offset);\n\n    if (isEqual(sortedBlockOffsets, blockOffsets)) {\n      return shape;\n    }\n  }\n  return 'UNKNOWN';\n};\n\nconst createPiece = (gridX:number, gridY:number, blockOffsets:BlockOffset[]):PieceData => {\n  const minX = Math.min(...blockOffsets.map(o => o.x));\n  const minY = Math.min(...blockOffsets.map(o => o.y));\n  const newPiece:PieceData = {\n    gridX: gridX + minX,\n    gridY: gridY + minY,\n    shape: findShape(blockOffsets.map(o => { return { x: o.x - minX, y: o.y - minY } }))\n  };\n  return newPiece;\n};\n\nconst calcSmallerPieces = (placedPiece: PieceData, completedGridPositions: GridPos[]):PieceData[] => {\n  const smallerPieces:PieceData[] = [];\n  const blockData:BlockData[] = SHAPES.get(placedPiece.shape) || [];\n  const pieceBlockOffsets:BlockOffset[] = blockData.map(b => b.offset);\n\n  const completedBlockOffsets:BlockOffset[] = toBlockOffsets(placedPiece.gridX, placedPiece.gridY, completedGridPositions);\n  const remainingBlockOffsets:BlockOffset[] = removeCompletedBlockOffsets(pieceBlockOffsets, completedBlockOffsets);\n  const groupedBlockOffsets:BlockOffset[][] = groupBlockOffsetsByNeighbours(remainingBlockOffsets);\n  groupedBlockOffsets.forEach(blockOffsets => {\n    const newPiece:PieceData = createPiece(placedPiece.gridX, placedPiece.gridY, blockOffsets);\n    smallerPieces.push(newPiece);\n  });\n\n  return smallerPieces;\n};\n\nexport const removeCompleted = (newPlacedPiece: PieceData, placedPieces: PieceData[], completed:GridPos[]):PieceData[] => {\n  const newPlacedPieces:PieceData[] = [];\n\n  [...placedPieces, newPlacedPiece].forEach(placedPiece => {\n    const gridPositions:GridPos[] = shapeToGridPositions(placedPiece.gridX, placedPiece.gridY, placedPiece.shape);\n    const completedGridPositions = gridPositions.filter(gridPos => completed.some(c => c.x === gridPos.x && c.y === gridPos.y));\n\n    if (completedGridPositions.length === 0) {\n      // keep piece as is\n      newPlacedPieces.push(placedPiece);\n    } else if (completedGridPositions.length !== gridPositions.length) {\n      // keep piece as one or more smaller pieces\n      const smallerPieces:PieceData[] = calcSmallerPieces(placedPiece, completedGridPositions);\n      newPlacedPieces.push(...smallerPieces);\n    }\n  });\n  return newPlacedPieces;\n};\n","import React, { FunctionComponent, ReactNode } from 'react';\nimport styles from './Grid.module.scss';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\nimport Piece, { PieceData } from '../piece/Piece';\n\nconst Grid: FunctionComponent<any> = ({ placedPieces, hoverPiece, completableBlocks, completedBlocks }) => {\n  const cellTypes = [\n    'OOOXXXOOO',\n    'OOOXXXOOO',\n    'OOOXXXOOO',\n    'XXXOOOXXX',\n    'XXXOOOXXX',\n    'XXXOOOXXX',\n    'OOOXXXOOO',\n    'OOOXXXOOO',\n    'OOOXXXOOO'\n  ];\n  const gameDimensions = useGameDimensions();\n  const cellSize = gameDimensions.cellSize;\n  const gridInlineStyles = {\n    left: `${gameDimensions.gridLeft}px`,\n    top: `${gameDimensions.gridTop}px`\n  };\n  const cellInlineStyles = {\n    width: `${cellSize}px`,\n    height: `${cellSize}px`\n  };\n\n  const rows = cellTypes.map( (cellType, rowIndex) => {\n    const cells: Array<ReactNode> = [];\n    cellType.split('').forEach( (ch, colIndex) =>  {\n      cells.push(<div key={colIndex}\n                      style={cellInlineStyles}\n                      className={ch === 'O' ? styles.cell : styles.shadedCell}>\n                 </div>)\n    });\n    return <div key={rowIndex} className={styles.row}>{cells}</div>;\n  } );\n\n  return (\n    <div style={gridInlineStyles}\n         className={styles.grid}>\n      {rows}\n      {placedPieces.map( (p:PieceData, i:number) => <Piece key={i} x={p.gridX} y={p.gridY} shape={p.shape}/>)}\n      {hoverPiece && <Piece key={999} x={hoverPiece.gridX} y={hoverPiece.gridY} shape={hoverPiece.shape} isMuted={true}/>}\n      {completableBlocks.map( (p:PieceData, i:number) => <Piece key={100+i} x={p.gridX} y={p.gridY} shape={p.shape} isCompletable={true}/>)}\n      {completedBlocks.map( (p:PieceData, i:number) => <Piece key={200+i} x={p.gridX} y={p.gridY} shape={p.shape} isCompleted={true}/>)}\n    </div>\n  );\n};\n\nexport default Grid;\n","import React, { FunctionComponent, useState } from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './DraggablePiece.module.scss';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\nimport Draggable, { DraggableData, DraggableEvent, DraggableEventHandler } from \"react-draggable\";\nimport Piece, { shapeDimensions } from '../piece/Piece';\n\nlet cx = classNames.bind(styles);\n\nconst DraggablePiece: FunctionComponent<any> = ({ shape, onDrag, onDragStop, isDisabled }) => {\n  const gameDimensions = useGameDimensions();\n  const shapeDims = shapeDimensions(shape, gameDimensions.cellSize);\n  const smallShapeDims = shapeDimensions(shape, gameDimensions.cellSize / 2);\n  const initialPosition = {\n    x: (shapeDims.width - smallShapeDims.width) / 2,\n    y: (shapeDims.height - smallShapeDims.height) / 2\n  };\n  const [isPreDragging, setIsPreDragging] = useState(true);\n  const [isDragging, setIsDragging] = useState(false);\n  const [position, setPosition] = useState(initialPosition);\n  const dragStartYOffset = -(gameDimensions.cellSize * 2);\n\n  if (!isDragging && position.x !== initialPosition.x && position.y !== initialPosition.y) {\n    setPosition(initialPosition);\n  }\n\n  let containerInlineStyles = {\n    left: `${gameDimensions.draggableLeft - (shapeDims.width / 2)}px`,\n    top: `${gameDimensions.draggableTop - (shapeDims.height / 2)}px`\n  };\n\n  let pieceContainerClassName = cx({\n    isPreDragging: isPreDragging,\n  });\n\n  const toGridDragData = (data: DraggableData) => {\n    const pieceRect = data.node.getBoundingClientRect();\n\n    const halfCellSize = gameDimensions.cellSize / 2;\n    const gridX = Math.floor( (pieceRect.left + halfCellSize - gameDimensions.gridLeft) / gameDimensions.cellSize );\n    const gridY = Math.floor( (pieceRect.top + halfCellSize - gameDimensions.gridTop) / gameDimensions.cellSize );\n    const isInsideGrid = gridX >= 0 && gridX <=8 && gridY >=0 && gridY <= 8;\n\n    return { isInsideGrid, gridX, gridY, shape };\n  };\n\n  const handleStart = () => {\n    setIsPreDragging(true);\n    setPosition({x:0,y:dragStartYOffset});\n    setIsDragging(true);\n  };\n  const handleDrag: DraggableEventHandler = (e: DraggableEvent, data: DraggableData) => {\n    setIsPreDragging(false);\n    onDrag(toGridDragData(data));\n  };\n  const handleStop: DraggableEventHandler = (e: DraggableEvent, data: DraggableData) => {\n    const gridDragData = toGridDragData(data);\n\n    setPosition(initialPosition);\n    setIsDragging(false);\n\n    onDragStop(gridDragData);\n  };\n\n  return (\n    <div style={containerInlineStyles} className={styles.container}>\n      <Draggable position={position}\n                 onStart={handleStart}\n                 onDrag={handleDrag}\n                 onStop={handleStop}\n                 disabled={isDisabled}>\n        <div className={pieceContainerClassName}>\n          <Piece x={0} y={0} shape={shape} isDraggable={true} isPreDragging={isPreDragging} isDragging={isDragging} isMuted={isDisabled}/>\n        </div>\n      </Draggable>\n    </div>\n  );\n};\n\nexport default DraggablePiece;\n","import React, { FunctionComponent } from 'react';\nimport styles from './Score.module.scss';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\nimport CountUp from 'react-countup';\n\nconst Score: FunctionComponent<any> = ({ previousScore, currentScore }) => {\n  const gameDimensions = useGameDimensions();\n  const headerHeight = gameDimensions.headerHeight;\n  const cellSize = gameDimensions.cellSize;\n  const containerInlineStyles = {\n    height: `${headerHeight}px`,\n  };\n  const valueInlineStyles = {\n    height: `${cellSize*2}px`,\n    fontSize: `${cellSize}px`\n  };\n\n  return (\n    <div className={styles.container} style={containerInlineStyles}>\n      <div style={valueInlineStyles}>\n        <CountUp start={previousScore} end={currentScore} duration={1}/>\n      </div>\n    </div>\n  );\n};\n\nexport default Score;\n","import React, { FunctionComponent } from 'react';\nimport styles from './PointsMessage.module.scss';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\n\nexport interface PointsMessageData {\n  gridX?: number,\n  gridY?: number,\n  points?: number,\n  isCombo?: boolean,\n  isShown: boolean\n}\n\nconst PointsMessage: FunctionComponent<any> = ({ pointsMessageData }) => {\n  const gameDimensions = useGameDimensions();\n  const cellSize = gameDimensions.cellSize;\n  const halfCellSize = gameDimensions.cellSize / 2;\n  const containerSize = cellSize * 3;\n  const containerTop = Math.floor(gameDimensions.gridTop + (pointsMessageData.gridY * cellSize) + halfCellSize - (containerSize/2));\n  const containerLeft = Math.floor(gameDimensions.gridLeft + (pointsMessageData.gridX * cellSize) + halfCellSize - (containerSize/2));\n  const containerInlineStyles = {\n    top: `${containerTop}px`,\n    left: `${containerLeft}px`,\n    width: `${containerSize}px`,\n    height: `${containerSize}px`,\n  };\n  const pointsHeight = Math.floor(0.75 * cellSize);\n  const pointsInlineStyles = {\n    height: `${pointsHeight}px`,\n    fontSize: `${pointsHeight}px`,\n    lineHeight: `${pointsHeight}px`\n  };\n\n  return (\n    <div className={styles.container} style={containerInlineStyles}>\n      {pointsMessageData.isShown ?\n        <div className={styles.points}\n             style={pointsInlineStyles}>\n          {pointsMessageData.isCombo ? <div>COMBO</div> : <></>}\n          <div>+{pointsMessageData.points}</div>\n        </div>\n        :\n        <></>\n      }\n    </div>\n  );\n};\n\nexport default PointsMessage;\n","import React, { FunctionComponent } from 'react';\nimport styles from './NewGameButton.module.scss';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\n\nconst NewGameButton: FunctionComponent<any> = ({ isShown, onClick }) => {\n  const gameDimensions = useGameDimensions();\n  const cellSize = gameDimensions.cellSize;\n  const containerLeft = gameDimensions.newGameButtonLeft;\n  const containerTop = gameDimensions.newGameButtonTop;\n  const containerHeight = cellSize;\n  const containerWidth = gameDimensions.gridSize;\n  const containerInlineStyles = {\n    top: `${containerTop}px`,\n    left: `${containerLeft}px`,\n    height: `${containerHeight}px`,\n    width: `${containerWidth}px`,\n  };\n  const fontSize = cellSize * 0.8;\n  const buttonHeight = cellSize*1.2;\n  const buttonWidth = cellSize*5;\n  const borderRadius = Math.floor(buttonHeight * 0.1);\n  const buttonInlineStyles = {\n    height: `${buttonHeight}px`,\n    width: `${buttonWidth}px`,\n    borderRadius: `${borderRadius}px`,\n    fontSize: `${fontSize}px`,\n    lineHeight: `${buttonHeight}px`\n  };\n\n  return (\n    <div className={styles.container} style={containerInlineStyles}>\n      {isShown ? <div className={styles.button} style={buttonInlineStyles} onClick={onClick}>New Game</div> : <></>}\n    </div>\n  );\n};\n\nexport default NewGameButton;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M369.75,0h-250.2v44.3h-85.6V110c0,47.2,38.4,85.6,85.6,85.6h1.5c7.9,51.3,47,92.2,97.2,103v70.9h-30.7 c-9.5,0-17.1,7.7-17.1,17.1v22.5h-26.2v80.3h200.9v-80.3h-26.2v-22.5c0-9.5-7.7-17.1-17.1-17.1h-30.7v-70.9 c50.3-10.8,89.3-51.8,97.2-103h1.5c47.2,0,85.6-38.4,85.6-85.6V44.3h-85.6V0H369.75z M119.55,152.3c-23.3,0-42.3-19-42.3-42.3V87.6 h42.3V152.3z M301.45,121.7l-25.7,21.7l8,32.7c1.5,6.1-5.2,11-10.6,7.7l-28.5-17.8l-28.6,17.7c-5.4,3.3-12.1-1.5-10.6-7.7l8-32.7 l-25.6-21.6c-4.8-4.1-2.3-12,4-12.4l33.5-2.4l12.8-31.2c2.4-5.9,10.7-5.9,13.1,0l12.7,31.1l33.5,2.4 C303.75,109.7,306.25,117.6,301.45,121.7z M411.95,87.6V110c0,23.3-18.9,42.3-42.2,42.3V87.6H411.95z\"\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgCup = function SvgCup(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 489.4 489.4\",\n    style: {\n      enableBackground: \"new 0 0 489.4 489.4\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCup, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/cup.bbf2a462.svg\";\nexport { ForwardRef as ReactComponent };","import React, { FunctionComponent } from 'react';\nimport styles from './HighScore.module.scss';\nimport { ReactComponent as CupSvg } from './cup.svg';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\n\nconst HighScore: FunctionComponent<any> = ({ highScore }) => {\n  const { windowWidth, gridTop, gridLeft, gridSize, cellSize } = useGameDimensions();\n  const containerHeight = Math.floor(cellSize * 0.75);\n  const containerTop = Math.floor(gridTop - containerHeight);\n  const containerRight = Math.floor(windowWidth - (gridLeft + gridSize));\n  const containerInlineStyles = {\n    top: `${containerTop}px`,\n    right: `${containerRight}px`,\n    height: `${containerHeight}px`,\n    width: `${gridSize}px`,\n  };\n  const cupSize = Math.floor(cellSize * 0.4);\n  const cupInlineStyles = {\n    height: `${cupSize}px`,\n    width: `${cupSize}px`\n  };\n  const fontSize = Math.floor(cellSize * 0.5);\n  const valueInlineStyles = {\n    height: `${fontSize}px`,\n    fontSize: `${fontSize}px`,\n    lineHeight: `${fontSize}px`\n  };\n\n  return (\n    <div className={styles.container} style={containerInlineStyles}>\n      <CupSvg className={styles.cup} style={cupInlineStyles}>{highScore}</CupSvg>\n      <div className={styles.highScore} style={valueInlineStyles}>{highScore}</div>\n    </div>\n  );\n};\n\nexport default HighScore;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M307.6,129.885c-11.453-11.447-23.783-16.778-38.805-16.778c-6.189,0-12.056,0.858-17.729,1.688 c-5.094,0.745-9.905,1.449-14.453,1.45c-8.27,0-14.197-2.397-19.82-8.017c-10.107-10.101-8.545-20.758-6.569-34.25 c2.357-16.096,5.291-36.127-15.101-56.508C183.578,5.932,167.848,0.081,148.372,0.081c-37.296,0-78.367,21.546-99.662,42.829 C17.398,74.205,0.1,115.758,0,159.917c-0.1,44.168,17.018,85.656,48.199,116.82c31.077,31.061,72.452,48.168,116.504,48.171 c0.005,0,0.007,0,0.013,0c44.315,0,86.02-17.289,117.428-48.681c17.236-17.226,32.142-44.229,38.9-70.471 C329.291,173.738,324.517,146.793,307.6,129.885z M309.424,202.764c-6.16,23.915-20.197,49.42-35.763,64.976 c-29.145,29.129-67.833,45.17-108.946,45.169c-0.002,0-0.009,0-0.011,0c-40.849-0.003-79.211-15.863-108.023-44.659 C27.777,239.36,11.908,200.896,12,159.944c0.092-40.962,16.142-79.512,45.191-108.545c19.071-19.061,57.508-39.317,91.18-39.317 c16.18,0,29.056,4.669,38.269,13.877c16.127,16.118,13.981,30.769,11.71,46.28c-2.067,14.116-4.41,30.115,9.96,44.478 c7.871,7.866,16.864,11.529,28.304,11.528c5.421-0.001,10.895-0.802,16.189-1.576c5.248-0.768,10.676-1.562,15.992-1.562 c7.938,0,18.557,1.508,30.322,13.267C317.724,156.971,313.562,186.699,309.424,202.764z\"\n}), React.createElement(\"path\", {\n  d: \"M142.002,43.531c-1.109,0-2.233,0.065-3.342,0.192c-15.859,1.824-27.33,16.199-25.571,32.042 c1.613,14.631,13.93,25.665,28.647,25.665c1.105,0,2.226-0.065,3.332-0.191c15.851-1.823,27.326-16.191,25.581-32.031 C169.032,54.57,156.716,43.531,142.002,43.531z M143.7,89.317c-0.652,0.075-1.313,0.113-1.963,0.113 c-8.59,0-15.778-6.441-16.721-14.985c-1.032-9.296,5.704-17.729,15.016-18.8c0.655-0.075,1.317-0.114,1.971-0.114 c8.587,0,15.775,6.446,16.72,14.993C159.747,79.816,153.006,88.247,143.7,89.317z\"\n}), React.createElement(\"path\", {\n  d: \"M102.997,113.64c-1.72-7.512-6.261-13.898-12.784-17.984c-4.597-2.881-9.889-4.404-15.304-4.404 c-10.051,0-19.254,5.079-24.618,13.587c-4.14,6.566-5.472,14.34-3.75,21.888c1.715,7.52,6.261,13.92,12.799,18.018 c4.596,2.88,9.888,4.402,15.303,4.402c10.051,0,19.255-5.078,24.624-13.593C103.401,128.975,104.726,121.193,102.997,113.64z  M89.111,129.16c-3.153,5.001-8.563,7.986-14.469,7.986c-3.158,0-6.246-0.889-8.93-2.57c-3.817-2.393-6.471-6.128-7.472-10.518 c-1.008-4.417-0.227-8.97,2.2-12.819c3.153-5.001,8.562-7.987,14.468-7.987c3.158,0,6.246,0.89,8.933,2.573 c3.806,2.384,6.454,6.11,7.458,10.493C92.312,120.743,91.534,125.306,89.111,129.16z\"\n}), React.createElement(\"path\", {\n  d: \"M70.131,173.25c-3.275,0-6.516,0.557-9.63,1.654c-15.055,5.301-23.05,21.849-17.821,36.892 c4.032,11.579,14.984,19.358,27.254,19.358c3.276,0,6.517-0.556,9.637-1.652c15.065-5.301,23.053-21.854,17.806-36.896 C93.346,181.029,82.397,173.25,70.131,173.25z M75.589,218.182c-1.836,0.646-3.738,0.973-5.655,0.973 c-7.168,0-13.566-4.543-15.921-11.302c-3.063-8.814,1.636-18.518,10.476-21.63c1.83-0.645,3.729-0.973,5.643-0.973 c7.165,0,13.56,4.542,15.914,11.304C89.12,205.37,84.429,215.072,75.589,218.182z\"\n}), React.createElement(\"path\", {\n  d: \"M140.817,229.415c-3.071-1.066-6.266-1.606-9.496-1.606c-12.307,0-23.328,7.804-27.431,19.429 c-2.566,7.317-2.131,15.185,1.229,22.151c3.349,6.943,9.204,12.163,16.486,14.696c3.075,1.071,6.274,1.614,9.51,1.614 c12.3,0,23.314-7.811,27.409-19.439c2.574-7.31,2.143-15.175-1.216-22.145C153.958,237.165,148.103,231.945,140.817,229.415z  M147.206,262.275c-2.407,6.834-8.873,11.425-16.091,11.425c-1.888,0-3.759-0.318-5.563-0.947c-4.253-1.48-7.67-4.524-9.623-8.575 c-1.965-4.074-2.219-8.68-0.718-12.957c2.408-6.825,8.883-11.411,16.11-11.411c1.888,0,3.759,0.317,5.561,0.942 c4.248,1.475,7.663,4.52,9.616,8.573C148.46,253.399,148.711,257.998,147.206,262.275z\"\n}), React.createElement(\"path\", {\n  d: \"M212.332,213.811c-5.466,0-10.81,1.55-15.448,4.479c-13.525,8.521-17.652,26.427-9.193,39.927 c5.315,8.445,14.463,13.488,24.469,13.488c5.458,0,10.796-1.545,15.434-4.464c13.541-8.507,17.663-26.419,9.19-39.926 C231.486,218.86,222.345,213.811,212.332,213.811z M221.205,257.082c-2.725,1.715-5.853,2.622-9.045,2.622 c-5.857,0-11.207-2.946-14.307-7.87c-4.947-7.896-2.513-18.39,5.433-23.395c2.724-1.72,5.852-2.629,9.047-2.629 c5.854,0,11.192,2.944,14.283,7.878C231.577,241.597,229.151,252.09,221.205,257.082z\"\n}), React.createElement(\"path\", {\n  d: \"M255.384,141.998c-1.06-0.117-2.134-0.176-3.194-0.176c-14.772,0-27.174,11.068-28.846,25.747 c-0.876,7.698,1.297,15.266,6.118,21.311c4.812,6.03,11.686,9.821,19.369,10.676c1.053,0.114,2.12,0.173,3.175,0.173 c14.754,0,27.164-11.067,28.869-25.748c0.886-7.688-1.277-15.247-6.091-21.288C269.97,146.651,263.082,142.853,255.384,141.998z  M268.955,172.602c-1.001,8.624-8.287,15.127-16.948,15.127c-0.621,0-1.251-0.034-1.86-0.101c-4.48-0.498-8.494-2.712-11.303-6.231 c-2.819-3.534-4.089-7.963-3.575-12.47c0.98-8.611,8.255-15.104,16.922-15.104c0.623,0,1.256,0.035,1.875,0.104 c4.498,0.499,8.523,2.717,11.334,6.244C268.209,163.697,269.472,168.114,268.955,172.602z\"\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref13 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref14 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref15 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref16 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar _ref17 =\n/*#__PURE__*/\nReact.createElement(\"g\", null);\n\nvar SvgPalette = function SvgPalette(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 324.99 324.99\",\n    style: {\n      enableBackground: \"new 0 0 324.99 324.99\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPalette, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/palette.c8d16663.svg\";\nexport { ForwardRef as ReactComponent };","import React, { FunctionComponent } from 'react';\nimport styles from './ThemeButton.module.scss';\nimport { ReactComponent as PaletteSvg } from './palette.svg';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\n\nconst ThemeButton: FunctionComponent<any> = ({ onClick }) => {\n  const { windowWidth, gridTop, gridLeft, gridSize, cellSize } = useGameDimensions();\n  const top = Math.floor(gridTop - cellSize * 2.2);\n  const right = Math.floor(windowWidth - (gridLeft + gridSize));\n  const size = Math.floor(cellSize * 0.8);\n  const inlineStyles = {\n    top: `${top}px`,\n    right: `${right}px`,\n    height: `${size}px`,\n    width: `${size}px`\n  };\n\n  return (\n\t\t<PaletteSvg className={styles.palette} style={inlineStyles} onClick={onClick}> </PaletteSvg>\n  );\n};\n\nexport default ThemeButton;\n","import React, { FunctionComponent, MouseEvent } from 'react';\nimport styles from './ThemeModal.module.scss';\nimport { useGameDimensions } from '../gameDimensionsProvider/GameDimensionsProvider';\nimport { Theme, useTheme } from '../themeProvider/ThemeProvider';\nimport { ReactComponent as CatSvg } from '../block/cat.svg';\n\ninterface ThemeChosenHandler  {\n  (theme: Theme): void;\n}\n\ninterface ThemeModalProps {\n  isOpen: boolean,\n  onThemeChosen: ThemeChosenHandler,\n  onClose: Function\n}\n\nconst ThemeModal: FunctionComponent<any> = ({ isOpen, onClose }:ThemeModalProps) => {\n  const theme = useTheme();\n\n  const { cellSize, gridTop, gridLeft, gridSize, windowWidth } = useGameDimensions();\n  const containerTop = Math.floor(gridTop - cellSize);\n  const containerRight = Math.floor(windowWidth - (gridLeft + gridSize + (cellSize * 0.5)));\n  const containerPadding = Math.floor(cellSize * 0.4);\n  const borderRadius = Math.floor(cellSize * 0.2);\n  const shadowBlur = Math.floor(cellSize * 1.2);\n  const shadowSpread = -Math.floor(cellSize * 0.2);\n  const containerInlineStyles = {\n    top: `${containerTop}px`,\n    right: `${containerRight}px`,\n    padding: `${containerPadding}px`,\n    boxShadow: `0 0 ${shadowBlur}px ${shadowSpread}px black`,\n    borderRadius: `${borderRadius}px`\n  };\n  const arrowSize = Math.floor(cellSize * 0.4);\n  const arrowInlineStyles = {\n    right: `${Math.floor(cellSize * 0.5)}px`,\n    borderWidth: `${arrowSize}px`,\n    marginLeft: `${arrowSize}px`\n  };\n  const fontSize = Math.floor(cellSize * 0.5);\n  const headerHeight = Math.floor(fontSize * 1.2);\n  const headerInlineStyles = {\n    height: `${headerHeight}px`,\n    fontSize: `${fontSize}px`,\n    lineHeight: `${fontSize}px`\n  };\n\n  const buttonInlineStyles = (isSelected:boolean) => {\n    return {\n      height: `${cellSize}px`,\n      width: `${cellSize}px`,\n      borderRadius: `${Math.floor(cellSize * 0.5)}px`,\n      margin: `${Math.floor(cellSize * 0.2)}px`,\n      boxShadow: isSelected ? `0 0 0 ${Math.floor(cellSize * 0.05)}px black` : `none`\n    };\n  };\n\n  const catInlineStyles = {\n    width: `100%`,\n    height: `100%`,\n    padding: `17%`\n  };\n\n  const chooseTheme = (chosenTheme: Theme) => {\n    return (event: MouseEvent) => {\n      theme.setValue(chosenTheme);\n    }\n  };\n\n  const closeModal = (event: MouseEvent) => {\n    onClose();\n  };\n\n  return (\n    isOpen ?\n    <>\n      <div className={styles.modalBackdrop} onClick={closeModal}> </div>\n      <div className={styles.container} style={containerInlineStyles}>\n        <div className={styles.arrow} style={arrowInlineStyles}> </div>\n        <div className={styles.header} style={headerInlineStyles}>Choose Theme</div>\n        <div className={styles.body}>\n          <div className={styles.buttonPlain} style={buttonInlineStyles(theme.value === 'plain')} onClick={chooseTheme('plain')}> </div>\n          <div className={styles.buttonCat} style={buttonInlineStyles(theme.value === 'cat')} onClick={chooseTheme('cat')}>\n            <CatSvg style={catInlineStyles}> </CatSvg>\n          </div>\n        </div>\n      </div>\n    </> : <></>\n  );\n};\n\nexport default ThemeModal;\n","import React, { useState } from 'react';\nimport GameDimensionsProvider from './components/gameDimensionsProvider/GameDimensionsProvider';\nimport Grid from './components/grid/Grid';\nimport DraggablePiece from './components/draggablePiece/DraggablePiece';\nimport {\n  calcCompleted,\n  CalcCompletedResult,\n  calculatePlaceable,\n  GridPos,\n  pickRandomShape,\n  PieceData,\n  Placeable,\n  removeCompleted,\n} from './components/piece/Piece';\nimport Score from './components/score/Score';\nimport PointsMessage, { PointsMessageData } from './components/pointsMessage/PointsMessage';\nimport NewGameButton from './components/newGameButton/NewGameButton';\nimport HighScore from './components/highScore/HighScore';\nimport ThemeButton from './components/themeButton/ThemeButton';\nimport ThemeModal from './components/themeModal/ThemeModal';\nimport ThemeProvider from './components/themeProvider/ThemeProvider';\nimport useLocalStorage from './hooks/useLocalStorage/UseLocalStorage';\n\nconst initialShape = pickRandomShape();\nconst initialPlacedPieces:PieceData[] = [];\n\n// FOR TESTING (replace above code with this)\n// const initialShape = '3B_I_1';\n// const initialPlacedPieces:PieceData[] = [\n//   { gridX: 2, gridY: 0, shape: '3B_I_2' },\n//   { gridX: 1, gridY: 3, shape: '3B_I_2' },\n//   { gridX: 2, gridY: 6, shape: '3B_I_2' },\n//   { gridX: 5, gridY: 0, shape: '3B_I_2' },\n//   { gridX: 4, gridY: 3, shape: '3B_I_2' },\n//   { gridX: 5, gridY: 6, shape: '3B_I_2' },\n//   { gridX: 8, gridY: 1, shape: '2B_I_2' },\n//   { gridX: 7, gridY: 3, shape: '3B_I_2' },\n//   { gridX: 8, gridY: 6, shape: '3B_I_2' }\n// ];\n\nlet placeable:Placeable = calculatePlaceable(initialShape, initialPlacedPieces);\n\nfunction App() {\n  const [placedPieces, setPlacedPieces] = useState<PieceData[]>(initialPlacedPieces);\n  const [hoverPiece, setHoverPiece] = useState<PieceData | null>();\n  const [completedBlocks, setCompletedBlocks] = useState<PieceData[]>([]);\n  const [completableBlocks, setCompletableBlocks] = useState<PieceData[]>([]);\n  const [nextShape, setNextShape] = useState<string>(initialShape);\n  const [previousScore, setPreviousScore] = useState<number>(0);\n  const [score, setScore] = useState<number>(0);\n  const [pointsMessageData, setPointsMessageData] = useState<PointsMessageData>({ isShown:false });\n  const [isGameOver, setIsGameOver] = useState<boolean>(false);\n  const [highScore, setHighScore] = useLocalStorage('highScore', 0);\n  const [isThemeModalOpen, setIsThemeModalOpen] = useState<boolean>(false);\n\n  const isPlaceable = (isInsideGrid:boolean, gridX:number, gridY:number): boolean => {\n    return isInsideGrid && placeable.gridFlags[gridX][gridY];\n  };\n\n  const updateNextShape = (placedPieces:PieceData[]) => {\n    const shape = pickRandomShape();\n    setNextShape(shape);\n    placeable = calculatePlaceable(shape, placedPieces);\n  };\n\n  const isGameFinished = ():boolean => {\n    return !placeable.isAnyPos;\n  };\n\n  const updatePlacedPieces = (newPlacedPiece:PieceData, placedPieces:PieceData[], { completedGridPositions }:CalcCompletedResult) => {\n    let newPlacedPieces = [...placedPieces, newPlacedPiece];\n\n    if (completedGridPositions.length > 0) {\n      // TODO have removeCompleted also return completedPieces instead of using a '1B' for each completedGridPositions\n      newPlacedPieces = removeCompleted(newPlacedPiece, placedPieces, completedGridPositions);\n    }\n    setPlacedPieces(newPlacedPieces);\n\n    return newPlacedPieces;\n  };\n\n  const toBlocks = (gridPositions:GridPos[]):PieceData[] => {\n    return gridPositions.map(p => { return { gridX:p.x, gridY:p.y, shape:'1B' }})\n  };\n\n  const updateCompletedBlocks = ({ completedGridPositions }:CalcCompletedResult) => {\n    if (completedGridPositions.length > 0) {\n      setCompletedBlocks(toBlocks(completedGridPositions));\n      window.setTimeout(() => { setCompletedBlocks([])}, 500);\n    }\n  };\n\n  const calcPoints = (placedBlocksKeptCount:number, completedRegionCount:number) => {\n    let points = placedBlocksKeptCount;\n    let pointsPerBlockCompleted = (completedRegionCount <= 2) ? 2 : 4;\n    points += (completedRegionCount * 9 * pointsPerBlockCompleted);\n    return points;\n  };\n\n  const showPointsMessage = (completedRegionCount: number, completedRegionCenter: GridPos, points: number) => {\n    setPointsMessageData({\n      gridX: completedRegionCenter.x,\n      gridY: completedRegionCenter.y,\n      points,\n      isCombo: completedRegionCount > 1,\n      isShown: true });\n    // Hide message after 2 secs\n    window.setTimeout(() => { setPointsMessageData({ isShown: false })}, 2000);\n  };\n\n  const updateScore = ({ placedBlocksKeptCount, completedRegionCount, completedRegionCenter }:CalcCompletedResult) => {\n    setPreviousScore(score);\n    const points = calcPoints(placedBlocksKeptCount, completedRegionCount);\n    const newScore = score + points;\n    setScore(newScore);\n    if (newScore > highScore) {\n      setHighScore(newScore);\n    }\n    if (completedRegionCount > 0) {\n      showPointsMessage(completedRegionCount, completedRegionCenter, points);\n    }\n  };\n\n  const onPieceDrag = ({ isInsideGrid, gridX, gridY, shape }:any) => {\n    if (isPlaceable(isInsideGrid, gridX, gridY)) {\n      const placeablePiece = { gridX, gridY, shape };\n      const completable = calcCompleted(placeablePiece, placedPieces);\n      setCompletableBlocks(toBlocks(completable.completedGridPositions));\n      setHoverPiece(placeablePiece);\n    } else {\n      setCompletableBlocks([]);\n      setHoverPiece(null);\n    }\n  };\n\n  const onPieceDragStop = ({ isInsideGrid, gridX, gridY, shape }:any) => {\n    if (isPlaceable(isInsideGrid, gridX, gridY)) {\n      const newPlacedPiece = { gridX, gridY, shape };\n\n      const completed = calcCompleted(newPlacedPiece, placedPieces);\n      const newPlacedPieces = updatePlacedPieces(newPlacedPiece, placedPieces, completed);\n      updateCompletedBlocks(completed);\n      updateScore(completed);\n      updateNextShape(newPlacedPieces);\n      if (isGameFinished()) {\n        setIsGameOver(true);\n      }\n    }\n    setCompletableBlocks([]);\n    setHoverPiece(null);\n  };\n\n  const initNewGame = () => {\n    setPlacedPieces([]);\n    updateNextShape([]);\n    setPreviousScore(0);\n    setScore(0);\n    setIsGameOver(false);\n  };\n\n  const onNewGameButtonClick = () => {\n    initNewGame();\n  };\n\n  const onThemeButtonClick = () => {\n    setIsThemeModalOpen(true);\n  };\n\n  const onThemeModalClose = () => {\n    setIsThemeModalOpen(false);\n  };\n\n  return (\n    <GameDimensionsProvider>\n      <ThemeProvider>\n        <div>\n        <ThemeButton onClick={onThemeButtonClick}/>\n        <ThemeModal isOpen={isThemeModalOpen} onClose={onThemeModalClose}/>\n        <Score previousScore={previousScore} currentScore={score}/>\n        <HighScore highScore={highScore}/>\n        <Grid placedPieces={placedPieces} hoverPiece={hoverPiece} completableBlocks={completableBlocks} completedBlocks={completedBlocks}/>\n        <DraggablePiece shape={nextShape} onDrag={onPieceDrag} onDragStop={onPieceDragStop} isDisabled={isGameOver}/>\n        <PointsMessage pointsMessageData={pointsMessageData}/>\n        <NewGameButton isShown={isGameOver} onClick={onNewGameButtonClick}/>\n      </div>\n      </ThemeProvider>\n    </GameDimensionsProvider>\n  );\n}\n\nexport default App;\n","import { useState } from 'react';\n\nexport default function useLocalStorage(key:string, initialValue:any) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value:any) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}