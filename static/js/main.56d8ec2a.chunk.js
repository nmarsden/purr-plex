(this["webpackJsonppurr-plex"]=this["webpackJsonppurr-plex"]||[]).push([[0],[,,,,,function(e,t,n){e.exports={grid:"Grid_grid__3byWf",row:"Grid_row__3iB0a",cell:"Grid_cell__Gw65o",shadedCell:"Grid_shadedCell__2xhfR"}},,function(e,t,n){e.exports={container:"DraggablePiece_container__2WQE4",isPreDragging:"DraggablePiece_isPreDragging__2WEyo"}},function(e,t,n){e.exports={container:"PointsMessage_container__kfyA8",points:"PointsMessage_points__1CcWh",flash:"PointsMessage_flash__3RSoB"}},function(e,t,n){e.exports={container:"NewGameButton_container__5XyCv",button:"NewGameButton_button__vLJP1"}},,function(e,t,n){e.exports={container:"Piece_container__HKwIh",piece:"Piece_piece__21Hob",isCompleted:"Piece_isCompleted__29xdv","fade-out":"Piece_fade-out__1E-gz"}},function(e,t,n){e.exports={block:"Block_block__3k5af",type1a:"Block_type1a__CE7pB",type1b:"Block_type1b__1osI_",type1c:"Block_type1c__19qYn",type1d:"Block_type1d__2h7mH",type2a:"Block_type2a__mNICL",type2b:"Block_type2b__OWzjg",type2c:"Block_type2c__36yJ6",type2d:"Block_type2d__229xO",type2e:"Block_type2e__2_wbq",type2f:"Block_type2f__1h2dF",type3a:"Block_type3a__UjqB1",type3b:"Block_type3b__X-il1",type3c:"Block_type3c__2ONk0",type3d:"Block_type3d__3oMRT",type4a:"Block_type4a__2ba0F",isPreDragging:"Block_isPreDragging__3ZTOG",isDragging:"Block_isDragging__3k0tt",isMuted:"Block_isMuted__xzwBa",isCompletable:"Block_isCompletable__14YK9"}},,function(e,t,n){e.exports={container:"Score_container__1Fd1Q"}},,function(e,t,n){e.exports=n(27)},,,,,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(6),i=n.n(r),c=(n(21),n(2)),f=n(1),s=Object(o.createContext)(null);function y(){var e=window.document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}var p=function(e){var t=e.children,n=function(){var e=Object(o.useState)(y()),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){function e(){a(y())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),r=n.width,i=n.height,c=r-2*(r/18),p=i-(i/9+i/2.5),l=Math.floor(c/9),u=Math.floor(p/9),x=Math.min(l,u),d=9*x,g=Math.floor(.3*(i-d)),h=Math.floor(.7*(i-d)),_=g,m=Math.floor((r-d)/2),b={cellSize:x,gridSize:d,gridLeft:m,gridTop:_,headerHeight:g,footerHeight:h,draggableLeft:Math.floor(m+d/2),draggableTop:Math.floor(_+d+2.2*x),newGameButtonLeft:m,newGameButtonTop:Math.floor(_+d+3.6*x)};return a.a.createElement(s.Provider,{value:b},t)},l=function(){return Object(o.useContext)(s)},u=n(5),x=n.n(u),d=n(3),g=n.n(d),h=n(11),_=n.n(h),m=n(4),b=n(12),O=n.n(b),v=g.a.bind(O.a),B=function(e){var t,n=e.x,o=e.y,r=e.size,i=e.blockType,c=e.isPreDragging,f=e.isDragging,s=e.isMuted,y=e.isCompletable,p={width:"".concat(r+1,"px"),height:"".concat(r+1,"px"),left:"".concat(n-1,"px"),top:"".concat(o-1,"px")},l=v((t={block:!0},Object(m.a)(t,"type".concat(i),!0),Object(m.a)(t,"isPreDragging",c),Object(m.a)(t,"isDragging",f),Object(m.a)(t,"isMuted",s),Object(m.a)(t,"isCompletable",y),t));return a.a.createElement("div",{style:p,className:l})},X=new Map([["1B",[{offset:{x:0,y:0},type:"4a"}]],["2B_I_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"3a"}]],["2B_I_2",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"3b"}]],["3B_I_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"3a"}]],["3B_I_2",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"3b"}]],["3B_L_1",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"2b"}]],["3B_L_2",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"3b"}]],["3B_L_3",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"3b"},{offset:{x:1,y:0},type:"3a"}]],["3B_L_4",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:1},type:"3a"}]],["4B_O",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"2b"}]],["4B_L_1",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:1},type:"2e"},{offset:{x:2,y:0},type:"3d"},{offset:{x:2,y:1},type:"2b"}]],["4B_L_2",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"2f"},{offset:{x:1,y:2},type:"3b"}]],["4B_L_3",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"3b"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"3a"}]],["4B_L_4",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"2c"},{offset:{x:1,y:2},type:"3a"}]],["4B_J_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"2a"},{offset:{x:2,y:1},type:"3b"}]],["4B_J_2",[{offset:{x:0,y:2},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"2f"},{offset:{x:1,y:2},type:"2b"}]],["4B_J_3",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:1},type:"2e"},{offset:{x:2,y:1},type:"3a"}]],["4B_J_4",[{offset:{x:0,y:0},type:"2d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"3b"},{offset:{x:1,y:0},type:"3a"}]],["4B_Z_1",[{offset:{x:0,y:1},type:"2d"},{offset:{x:0,y:2},type:"3b"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"2b"}]],["4B_Z_2",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2a"},{offset:{x:1,y:1},type:"2c"},{offset:{x:2,y:1},type:"3a"}]],["4B_S_1",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2c"},{offset:{x:1,y:1},type:"2a"},{offset:{x:1,y:2},type:"3b"}]],["4B_S_2",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"2d"},{offset:{x:1,y:1},type:"2b"},{offset:{x:2,y:0},type:"3a"}]],["4B_T_1",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"1c"},{offset:{x:2,y:1},type:"3a"}]],["4B_T_2",[{offset:{x:0,y:1},type:"3c"},{offset:{x:1,y:0},type:"3d"},{offset:{x:1,y:1},type:"1b"},{offset:{x:1,y:2},type:"3b"}]],["4B_T_3",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"1a"},{offset:{x:1,y:1},type:"3b"},{offset:{x:2,y:0},type:"3a"}]],["4B_T_4",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"1d"},{offset:{x:0,y:2},type:"3b"},{offset:{x:1,y:1},type:"3a"}]],["4B_I_1",[{offset:{x:0,y:0},type:"3c"},{offset:{x:1,y:0},type:"2e"},{offset:{x:2,y:0},type:"2e"},{offset:{x:3,y:0},type:"3a"}]],["4B_I_2",[{offset:{x:0,y:0},type:"3d"},{offset:{x:0,y:1},type:"2f"},{offset:{x:0,y:2},type:"2f"},{offset:{x:0,y:3},type:"3b"}]]]),E=function(e,t,n){return(X.get(n)||[]).map((function(n){return{x:e+n.offset.x,y:t+n.offset.y}}))},M=function(e){for(var t=[],n=0;n<9;n++){var o=[];t.push(o);for(var a=0;a<9;a++)o.push(e)}return t},j=function(e){var t=M(!1);return e.forEach((function(e){E(e.gridX,e.gridY,e.shape).forEach((function(e){t[e.x][e.y]=!0}))})),t},k=g.a.bind(_.a),S=function(e){var t=e.x,n=e.y,o=e.shape,r=e.isDraggable,i=e.isPreDragging,c=e.isDragging,f=e.isMuted,s=e.isCompletable,y=e.isCompleted,p=l().cellSize,u=function(e,t,n,o,r,i,c,f){return(X.get(o)||[]).map((function(o,s){return a.a.createElement(B,{key:s,x:e+o.offset.x*n,y:t+o.offset.y*n,size:n,blockType:i?"4a":o.type,isPreDragging:r,isDragging:i,isMuted:c,isCompletable:f})}))}(p*t,p*n,r&&!c?Math.floor(p/2):p,o,i,c,f,s),x=C(o,p),d={width:"".concat(x.width,"px"),height:"".concat(x.height,"px")},g=k({container:!0,isCompleted:y}),h=k({piece:!0});return a.a.createElement("div",{style:d,className:g},a.a.createElement("div",{style:d,className:h},u))},w=function(){return Array.from(X.keys())[Math.floor(Math.random()*X.size)]},C=function(e,t){for(var n=(X.get(e)||[]).map((function(e){return e.offset})),o=n[0].x,a=n[0].y,r=n[0].x,i=n[0].y,c=1,f=n.length;c<f;c++){var s=n[c].x,y=n[c].y;o=s<o?s:o,a=y<a?y:a,r=s>r?s:r,i=y>i?y:i}return{width:(r-o+1)*t,height:(i-a+1)*t}},P=function(e,t){for(var n=j(t),o=M(!1),a=!1,r=0;r<9;r++)for(var i=function(t){var i=!0;E(r,t,e).forEach((function(e){i=i&&e.x<9&&e.y<9&&!n[e.x][e.y]})),o[r][t]=i,i&&(a=!0)},c=0;c<9;c++)i(c);return{gridFlags:o,isAnyPos:a}},D=function(e,t){var n=[],o=[0,1,2,3,4,5,6,7,8],a=j([].concat(Object(c.a)(t),[e])),r=[],i=[],f=[],s=0,y=E(e.gridX,e.gridY,e.shape);y.forEach((function(e){if(!r.includes(e.x)&&a[e.x].every((function(e){return e}))){var t=o.map((function(t){return{x:e.x,y:t}}));n.push.apply(n,Object(c.a)(t)),s++,r.push(e.x)}if(!i.includes(e.y)&&o.every((function(t){return a[t][e.y]}))){var y=o.map((function(t){return{x:t,y:e.y}}));n.push.apply(n,Object(c.a)(y)),s++,i.push(e.y)}var p=function(e){for(var t=[],n=3*Math.floor(e.x/3),o=3*Math.floor(e.y/3),a=0;a<3;a++)for(var r=0;r<3;r++)t.push({x:n+a,y:o+r});return t}(e),l=function(e){var t=Math.floor((e.y+1)/3);return 3*Math.floor((e.x+1)/3)+t}(p[0]);!f.includes(l)&&p.every((function(e){var t=e.x,n=e.y;return a[t][n]}))&&(n.push.apply(n,Object(c.a)(p)),s++,f.push(l))}));var p=y.filter((function(e){return!n.some((function(t){return t.x===e.x&&t.y===e.y}))})).length,l=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),o=Math.min.apply(Math,Object(c.a)(t)),a=Math.max.apply(Math,Object(c.a)(t)),r=Math.min.apply(Math,Object(c.a)(n)),i=Math.max.apply(Math,Object(c.a)(n));return{x:Math.floor(o+(a-o)/2),y:Math.floor(r+(i-r)/2)}}(n);return{completedGridPositions:n,completedRegionCount:s,completedRegionCenter:l,placedBlocksKeptCount:p}},z=function(e,t){var n=e[t];return e.some((function(e){return e.x===n.x&&e.y===n.y+1||e.x===n.x&&e.y===n.y-1||e.y===n.y&&e.x===n.x+1||e.y===n.y&&e.x===n.x-1}))},N=function(e,t){return e.length===t.length&&e.every((function(e,n){return e.x===t[n].x&&e.y===t[n].y}))},G=function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:0},L=function(e){for(var t=function(e){return function(e){return e.map((function(e){return{x:e.x,y:e.y}}))}(e).sort(G)}(e),n=0,o=Array.from(X.keys());n<o.length;n++){var a=o[n],r=(X.get(a)||[]).map((function(e){return e.offset}));if(N(t,r))return a}return"UNKNOWN"},Y=function(e,t){var n,o,a=[];return function(e){for(var t=[],n=[],o=0;o<e.length;o++)z(e,o)?n.push(e[o]):t.push([e[o]]);return n.length>0&&t.push(n),t}(function(e,t){return e.filter((function(e){return!t.some((function(t){return t.x===e.x&&t.y===e.y}))}))}((X.get(e.shape)||[]).map((function(e){return e.offset})),(n=e.gridX,o=e.gridY,t.map((function(e){return{x:e.x-n,y:e.y-o}}))))).forEach((function(t){var n=function(e,t,n){var o=Math.min.apply(Math,Object(c.a)(n.map((function(e){return e.x})))),a=Math.min.apply(Math,Object(c.a)(n.map((function(e){return e.y}))));return{gridX:e+o,gridY:t+a,shape:L(n.map((function(e){return{x:e.x-o,y:e.y-a}})))}}(e.gridX,e.gridY,t);a.push(n)})),a},T=function(e){var t=e.placedPieces,n=e.hoverPiece,o=e.completableBlocks,r=e.completedBlocks,i=l(),c=i.cellSize,f={left:"".concat(i.gridLeft,"px"),top:"".concat(i.gridTop,"px")},s={width:"".concat(c,"px"),height:"".concat(c,"px")},y=["OOOXXXOOO","OOOXXXOOO","OOOXXXOOO","XXXOOOXXX","XXXOOOXXX","XXXOOOXXX","OOOXXXOOO","OOOXXXOOO","OOOXXXOOO"].map((function(e,t){var n=[];return e.split("").forEach((function(e,t){n.push(a.a.createElement("div",{key:t,style:s,className:"O"===e?x.a.cell:x.a.shadedCell}))})),a.a.createElement("div",{key:t,className:x.a.row},n)}));return a.a.createElement("div",{style:f,className:x.a.grid},y,t.map((function(e,t){return a.a.createElement(S,{key:t,x:e.gridX,y:e.gridY,shape:e.shape})})),n&&a.a.createElement(S,{key:999,x:n.gridX,y:n.gridY,shape:n.shape,isMuted:!0}),o.map((function(e,t){return a.a.createElement(S,{key:100+t,x:e.gridX,y:e.gridY,shape:e.shape,isCompletable:!0})})),r.map((function(e,t){return a.a.createElement(S,{key:200+t,x:e.gridX,y:e.gridY,shape:e.shape,isCompleted:!0})})))},I=n(7),H=n.n(I),R=n(13),F=n.n(R),J=g.a.bind(H.a),W=function(e){var t=e.shape,n=e.onDrag,r=e.onDragStop,i=e.isDisabled,c=l(),s=C(t,c.cellSize),y=C(t,c.cellSize/2),p={x:(s.width-y.width)/2,y:(s.height-y.height)/2},u=Object(o.useState)(!0),x=Object(f.a)(u,2),d=x[0],g=x[1],h=Object(o.useState)(!1),_=Object(f.a)(h,2),m=_[0],b=_[1],O=Object(o.useState)(p),v=Object(f.a)(O,2),B=v[0],X=v[1],E=-2*c.cellSize;m||B.x===p.x||B.y===p.y||X(p);var M={left:"".concat(c.draggableLeft-s.width/2,"px"),top:"".concat(c.draggableTop-s.height/2,"px")},j=J({isPreDragging:d}),k=function(e){var n=e.node.getBoundingClientRect(),o=c.cellSize/2,a=Math.floor((n.left+o-c.gridLeft)/c.cellSize),r=Math.floor((n.top+o-c.gridTop)/c.cellSize);return{isInsideGrid:a>=0&&a<=8&&r>=0&&r<=8,gridX:a,gridY:r,shape:t}};return a.a.createElement("div",{style:M,className:H.a.container},a.a.createElement(F.a,{position:B,onStart:function(){g(!0),X({x:0,y:E}),b(!0)},onDrag:function(e,t){g(!1),n(k(t))},onStop:function(e,t){var n=k(t);X(p),b(!1),r(n)},disabled:i},a.a.createElement("div",{className:j},a.a.createElement(S,{x:0,y:0,shape:t,isDraggable:!0,isPreDragging:d,isDragging:m,isMuted:i}))))},A=n(14),K=n.n(A),q=n(15),Z=n.n(q),Q=function(e){var t=e.previousScore,n=e.currentScore,o=l(),r=o.headerHeight,i=o.cellSize,c={height:"".concat(r,"px")},f={height:"".concat(2*i,"px"),fontSize:"".concat(i,"px")};return a.a.createElement("div",{className:K.a.container,style:c},a.a.createElement("div",{style:f},a.a.createElement(Z.a,{start:t,end:n,duration:1})))},U=n(8),V=n.n(U),$=function(e){var t=e.pointsMessageData,n=l(),o=n.cellSize,r=n.cellSize/2,i=3*o,c=Math.floor(n.gridTop+t.gridY*o+r-i/2),f=Math.floor(n.gridLeft+t.gridX*o+r-i/2),s={top:"".concat(c,"px"),left:"".concat(f,"px"),width:"".concat(i,"px"),height:"".concat(i,"px")},y=Math.floor(.75*o),p={height:"".concat(y,"px"),fontSize:"".concat(y,"px"),lineHeight:"".concat(y,"px")};return a.a.createElement("div",{className:V.a.container,style:s},t.isShown?a.a.createElement("div",{className:V.a.points,style:p},t.isCombo?a.a.createElement("div",null,"COMBO"):a.a.createElement(a.a.Fragment,null),a.a.createElement("div",null,"+",t.points)):a.a.createElement(a.a.Fragment,null))},ee=n(9),te=n.n(ee),ne=function(e){var t=e.isShown,n=e.onClick,o=l(),r=o.cellSize,i=o.newGameButtonLeft,c=o.newGameButtonTop,f=r,s=o.gridSize,y={top:"".concat(c,"px"),left:"".concat(i,"px"),height:"".concat(f,"px"),width:"".concat(s,"px")},p=.8*r,u=1.2*r,x=5*r,d=Math.floor(.1*u),g={height:"".concat(u,"px"),width:"".concat(x,"px"),borderRadius:"".concat(d,"px"),fontSize:"".concat(p,"px"),lineHeight:"".concat(u,"px")};return a.a.createElement("div",{className:te.a.container,style:y},t?a.a.createElement("div",{className:te.a.button,style:g,onClick:n},"New Game"):a.a.createElement(a.a.Fragment,null))},oe=w(),ae=[],re=P(oe,ae);var ie=function(){var e=Object(o.useState)(ae),t=Object(f.a)(e,2),n=t[0],r=t[1],i=Object(o.useState)(),s=Object(f.a)(i,2),y=s[0],l=s[1],u=Object(o.useState)([]),x=Object(f.a)(u,2),d=x[0],g=x[1],h=Object(o.useState)([]),_=Object(f.a)(h,2),m=_[0],b=_[1],O=Object(o.useState)(oe),v=Object(f.a)(O,2),B=v[0],X=v[1],M=Object(o.useState)(0),j=Object(f.a)(M,2),k=j[0],S=j[1],C=Object(o.useState)(0),z=Object(f.a)(C,2),N=z[0],G=z[1],L=Object(o.useState)({isShown:!1}),I=Object(f.a)(L,2),H=I[0],R=I[1],F=Object(o.useState)(!1),J=Object(f.a)(F,2),A=J[0],K=J[1],q=function(e,t,n){return e&&re.gridFlags[t][n]},Z=function(e){var t=w();X(t),re=P(t,e)},U=function(e,t,n){var o=n.completedGridPositions,a=[].concat(Object(c.a)(t),[e]);return o.length>0&&(a=function(e,t,n){var o=[];return[].concat(Object(c.a)(t),[e]).forEach((function(e){var t=E(e.gridX,e.gridY,e.shape),a=t.filter((function(e){return n.some((function(t){return t.x===e.x&&t.y===e.y}))}));if(0===a.length)o.push(e);else if(a.length!==t.length){var r=Y(e,a);o.push.apply(o,Object(c.a)(r))}})),o}(e,t,o)),r(a),a},V=function(e){return e.map((function(e){return{gridX:e.x,gridY:e.y,shape:"1B"}}))},ee=function(e){var t=e.placedBlocksKeptCount,n=e.completedRegionCount,o=e.completedRegionCenter;S(N);var a=function(e,t){var n=e;return n+=9*t*(t<=2?2:4)}(t,n);G(N+a),n>0&&function(e,t,n){R({gridX:t.x,gridY:t.y,points:n,isCombo:e>1,isShown:!0}),window.setTimeout((function(){R({isShown:!1})}),2e3)}(n,o,a)};return a.a.createElement(p,null,a.a.createElement("div",null,a.a.createElement(Q,{previousScore:k,currentScore:N}),a.a.createElement(T,{placedPieces:n,hoverPiece:y,completableBlocks:m,completedBlocks:d}),a.a.createElement(W,{shape:B,onDrag:function(e){var t=e.isInsideGrid,o=e.gridX,a=e.gridY,r=e.shape;if(q(t,o,a)){var i={gridX:o,gridY:a,shape:r},c=D(i,n);b(V(c.completedGridPositions)),l(i)}else b([]),l(null)},onDragStop:function(e){var t=e.isInsideGrid,o=e.gridX,a=e.gridY,r=e.shape;if(q(t,o,a)){var i={gridX:o,gridY:a,shape:r},c=D(i,n),f=U(i,n,c);!function(e){var t=e.completedGridPositions;t.length>0&&(g(V(t)),window.setTimeout((function(){g([])}),500))}(c),ee(c),Z(f),re.isAnyPos||K(!0)}b([]),l(null)},isDisabled:A}),a.a.createElement($,{pointsMessageData:H}),a.a.createElement(ne,{isShown:A,onClick:function(){r([]),Z([]),S(0),G(0),K(!1)}})))};i.a.render(a.a.createElement(ie,null),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.56d8ec2a.chunk.js.map